(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{2955:function(e,s,i){Promise.resolve().then(i.bind(i,7459))},7459:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return R}});var l=i(7437),n=i(2265),t=i(9376),r=i(4753),a=i(3397),o=i(8543),d=i(8319),c=i(1504),x=i(5338),h=i(7639),u=i(9083),j=i(5666),Z=i(5545),m=i(658),p=i(1563),f=i(8190),g=i(34),v=i(1002),b=i(9352),y=i(1835),C=i(7554),_=i(2995),I=i(8654),P=i(8045),w=i(6838),S=i(6116),W=i(6382),k=i(6875),O=i(793),N=i(6069),M=i(7615),z=i(6136),T=i(1442),A=i(2517),B=i(8759),D=i(7823),G=i(4361),E=i(6508),q=(0,E.Z)((0,l.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline"),F=(0,E.Z)((0,l.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff"),L=i(1637);function K(){let e=(0,t.useRouter)(),s=(0,t.useSearchParams)(),[i,E]=(0,n.useState)(0),[K,R]=(0,n.useState)(!0),[H,Q]=(0,n.useState)(null),[V,J]=(0,n.useState)(null),[U,X]=(0,n.useState)([]),[Y,$]=(0,n.useState)([]),[ee,es]=(0,n.useState)(null),ei=(0,n.useMemo)(()=>new Map(U.map(e=>[e.id,e.name])),[U]),el=(0,n.useMemo)(()=>new Map(Y.map(e=>[e.id,e.name])),[Y]);(0,n.useEffect)(()=>{let e=s.get("id");if(!e){Q("No Goal ID provided."),R(!1);return}(async()=>{try{let[s,i]=await Promise.all([(0,L.Cq)(),(0,L.LK)()]);X(s),$(i);try{let s=await (0,L.CK)(e,"active");J(s),es("Published")}catch(i){console.log("No active version found, fetching draft.");let s=await (0,L.CK)(e,"draft");J(s),es("Draft")}}catch(e){console.error("Failed to load data for view:",e),Q("Could not find a published or draft version for this goal.")}finally{R(!1)}})()},[s]);let en=()=>e.push("/team-leader-dashboard/goal-mgmt");if(K)return(0,l.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,l.jsx)(d.Z,{})});if(H||!V)return(0,l.jsxs)(c.Z,{maxWidth:"md",sx:{py:4},children:[(0,l.jsx)(x.Z,{severity:"error",children:H||"Goal data could not be loaded."}),(0,l.jsx)(h.Z,{onClick:en,sx:{mt:2},children:"Go Back"})]});let et=V.scorecardparameters.reduce((e,s)=>e+s.max_score,0);return(0,l.jsxs)(o.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,l.jsx)(r.q,{activeItem:"goal-mgmt"}),(0,l.jsxs)(o.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",marginLeft:"280px"},children:[(0,l.jsx)(u.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary"},children:(0,l.jsx)(j.Z,{children:(0,l.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexGrow:1},children:[(0,l.jsx)(Z.Z,{onClick:en,children:(0,l.jsx)(T.Z,{})}),(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(m.Z,{variant:"h6",fontWeight:600,children:"View Goal"}),(0,l.jsxs)(m.Z,{variant:"body2",color:"text.secondary",children:[V.name," (",ee," Version)"]})]})]})})}),(0,l.jsxs)(c.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,l.jsx)(a.O,{}),(0,l.jsxs)(p.Z,{sx:{mb:3},children:[(0,l.jsx)(o.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,l.jsxs)(f.Z,{value:i,onChange:(e,s)=>E(s),children:[(0,l.jsx)(g.Z,{icon:(0,l.jsx)(A.Z,{}),label:"Interaction Blueprint",value:0,iconPosition:"start"}),(0,l.jsx)(g.Z,{icon:(0,l.jsx)(B.Z,{}),label:"Structured Data Capture",value:1,iconPosition:"start"}),(0,l.jsx)(g.Z,{icon:(0,l.jsx)(D.Z,{}),label:"Conversation Insights",value:2,iconPosition:"start"}),(0,l.jsx)(g.Z,{icon:(0,l.jsx)(G.Z,{}),label:"Quality Scorecard",value:3,iconPosition:"start"})]})}),(0,l.jsxs)(v.Z,{sx:{p:0,"& .MuiTableCell-root":{p:1}},children:[0===i&&(0,l.jsxs)(o.Z,{sx:{p:3},children:[(0,l.jsx)(m.Z,{variant:"h5",fontWeight:600,gutterBottom:!0,sx:{mb:3},children:"Goal Configuration"}),(0,l.jsxs)(b.Z,{container:!0,spacing:3,children:[(0,l.jsxs)(b.Z,{size:{xs:12,md:6},children:[(0,l.jsx)(y.Z,{fullWidth:!0,label:"Goal Name",value:V.name,sx:{mb:2},InputProps:{readOnly:!0},variant:"filled"}),(0,l.jsx)(y.Z,{fullWidth:!0,label:"Owner",value:ei.get(V.owner_id)||V.owner_id,sx:{mb:2},InputProps:{readOnly:!0},variant:"filled"}),(0,l.jsx)(y.Z,{fullWidth:!0,label:"Tags",value:V.tags||"N/A",sx:{mb:2},InputProps:{readOnly:!0},variant:"filled"})]}),(0,l.jsxs)(b.Z,{size:{xs:12,md:6},children:[(0,l.jsx)(y.Z,{fullWidth:!0,label:"Default Assigned Team",value:el.get(V.team_id||"")||"None",sx:{mb:2},InputProps:{readOnly:!0},variant:"filled"}),(0,l.jsx)(y.Z,{fullWidth:!0,multiline:!0,rows:4,label:"Description",value:V.description||"N/A",InputProps:{readOnly:!0},variant:"filled"})]})]}),(0,l.jsx)(C.Z,{sx:{my:3}}),(0,l.jsx)(m.Z,{variant:"h6",gutterBottom:!0,sx:{mb:2},children:"System Prompt (Interaction Blueprint)"}),(0,l.jsx)(y.Z,{fullWidth:!0,multiline:!0,rows:8,value:V.prompt_text,InputProps:{readOnly:!0},variant:"filled"})]}),1===i&&(0,l.jsxs)(o.Z,{sx:{p:3},children:[(0,l.jsx)(m.Z,{variant:"h5",fontWeight:600,sx:{mb:2},children:"Structured Data Capture (Outcome Fields)"}),(0,l.jsx)(_.Z,{component:I.Z,variant:"outlined",children:(0,l.jsxs)(P.Z,{children:[(0,l.jsx)(w.Z,{children:(0,l.jsxs)(S.Z,{sx:{"& .MuiTableCell-root":{fontWeight:600,backgroundColor:"action.hover"}},children:[(0,l.jsx)(W.Z,{children:"Attribute Name"}),(0,l.jsx)(W.Z,{children:"Data Type"}),(0,l.jsx)(W.Z,{children:"Elicitation Prompt"}),(0,l.jsx)(W.Z,{align:"center",children:"Required"}),(0,l.jsx)(W.Z,{align:"center",children:"PII"}),(0,l.jsx)(W.Z,{children:"Weight"})]})}),(0,l.jsx)(k.Z,{children:V.outcomefields.map((e,s)=>(0,l.jsxs)(S.Z,{children:[(0,l.jsx)(W.Z,{children:e.attribute_name}),(0,l.jsx)(W.Z,{children:(0,l.jsx)(O.Z,{size:"small",label:e.data_type})}),(0,l.jsx)(W.Z,{children:e.elicitation_prompt||"N/A"}),(0,l.jsx)(W.Z,{align:"center",children:e.is_required?(0,l.jsx)(q,{color:"success"}):(0,l.jsx)(F,{color:"disabled"})}),(0,l.jsx)(W.Z,{align:"center",children:e.is_pii?(0,l.jsx)(q,{color:"error"}):(0,l.jsx)(F,{color:"disabled"})}),(0,l.jsx)(W.Z,{children:e.weight})]},s))})]})})]}),2===i&&(0,l.jsxs)(o.Z,{sx:{p:3},children:[(0,l.jsx)(m.Z,{variant:"h5",fontWeight:600,gutterBottom:!0,sx:{mb:3},children:"Conversation Insights"}),(0,l.jsxs)(b.Z,{container:!0,spacing:3,children:[(0,l.jsx)(b.Z,{size:{xs:12,md:6},children:(0,l.jsx)(p.Z,{variant:"outlined",children:(0,l.jsxs)(v.Z,{children:[(0,l.jsx)(m.Z,{variant:"h6",gutterBottom:!0,children:"Analytics Models (Insights)"}),(0,l.jsx)(N.Z,{spacing:1,children:V.insights.map(e=>(0,l.jsx)(M.Z,{control:(0,l.jsx)(z.Z,{checked:e.is_enabled,disabled:!0}),label:e.name},e.name))})]})})}),(0,l.jsx)(b.Z,{size:{xs:12,md:6},children:(0,l.jsx)(p.Z,{variant:"outlined",children:(0,l.jsxs)(v.Z,{children:[(0,l.jsx)(m.Z,{variant:"h6",gutterBottom:!0,children:"Dispositions"}),(0,l.jsx)(N.Z,{spacing:1.5,children:V.dispositions.map((e,s)=>(0,l.jsxs)(o.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,l.jsx)(y.Z,{size:"small",label:"Name",value:e.name,fullWidth:!0,InputProps:{readOnly:!0},variant:"filled"}),(0,l.jsx)(y.Z,{size:"small",label:"Category",value:e.category,sx:{minWidth:120},InputProps:{readOnly:!0},variant:"filled"})]},s))})]})})})]})]}),3===i&&(0,l.jsxs)(o.Z,{sx:{p:3},children:[(0,l.jsxs)(m.Z,{variant:"h5",fontWeight:600,children:["Quality Scorecard ",(0,l.jsx)(O.Z,{label:"Total Score: ".concat(et," points")})]}),(0,l.jsx)(_.Z,{component:I.Z,variant:"outlined",sx:{mt:2},children:(0,l.jsxs)(P.Z,{children:[(0,l.jsx)(w.Z,{children:(0,l.jsxs)(S.Z,{sx:{"& .MuiTableCell-root":{fontWeight:600,backgroundColor:"action.hover"}},children:[(0,l.jsx)(W.Z,{children:"Parameter Name"}),(0,l.jsx)(W.Z,{children:"Scoring Type"}),(0,l.jsx)(W.Z,{children:"Failure Type"}),(0,l.jsx)(W.Z,{children:"Max Score"}),(0,l.jsx)(W.Z,{sx:{width:"30%"},children:"Rules & Explanation"})]})}),(0,l.jsx)(k.Z,{children:V.scorecardparameters.map((e,s)=>(0,l.jsxs)(S.Z,{children:[(0,l.jsx)(W.Z,{children:e.name}),(0,l.jsx)(W.Z,{children:(0,l.jsx)(O.Z,{size:"small",label:e.scoring_type})}),(0,l.jsx)(W.Z,{children:(0,l.jsx)(O.Z,{size:"small",label:e.failure_type,color:"FATAL"===e.failure_type?"error":"default"})}),(0,l.jsx)(W.Z,{children:e.max_score}),(0,l.jsx)(W.Z,{children:e.rules_and_explanation||"N/A"})]},s))})]})})]})]})]})]})]})]})}function R(){return(0,l.jsx)(n.Suspense,{fallback:(0,l.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,l.jsx)(d.Z,{})}),children:(0,l.jsx)(K,{})})}}},function(e){e.O(0,[334,103,118,362,835,41,4,732,426,618,971,117,744],function(){return e(e.s=2955)}),_N_E=e.O()}]);