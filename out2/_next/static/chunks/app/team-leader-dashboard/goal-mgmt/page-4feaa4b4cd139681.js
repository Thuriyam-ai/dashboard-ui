(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{2279:function(e,t,a){Promise.resolve().then(a.bind(a,9643))},9643:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var n=a(7437),s=a(2265),r=a(9376),i=a(4753),o=a(3397),l=a(8543),c=a(8319),d=a(5338),x=a(658),h=a(7639),u=a(9352),Z=a(1563),g=a(1002),j=a(793),p=a(9083),f=a(5666),m=a(5545),v=a(2854),y=a(1504),b=a(4247),_=a(3985),w=a(6825),C=a(7893),I=a(5386),z=a(307),W=a(9470),k=a(196),S=a(9010),A=a(1381),N=a(3484),G=a(2961),E=a(8841),F=a(599),L=a(2141),X=a(9391),B=a(2192),D=a(4881),O=a(1637);function P(){let e=(0,r.useRouter)(),[t,a]=(0,s.useState)([]),[P,J]=(0,s.useState)(!0),[R,q]=(0,s.useState)(null),[H,U]=(0,s.useState)(!1),[V,M]=(0,s.useState)(null),{logout:T}=(0,D.a)(),Y=async()=>{try{J(!0);let e=await (0,O.aX)();a(e),q(null)}catch(e){q("Failed to fetch goals. Please try again later."),console.error(e)}finally{J(!1)}};(0,s.useEffect)(()=>{Y()},[]);let K=async e=>{try{await (0,O.g3)(e),alert("Draft published successfully!"),await Y()}catch(e){console.error("Failed to publish draft:",e),alert("Error: Could not publish draft.")}},Q=async()=>{if(V)try{await (0,O.s6)(V.goal_id),alert('Goal "'.concat(V.goal_name,'" archived.')),a(t.filter(e=>e.goal_id!==V.goal_id))}catch(e){console.error("Failed to delete goal:",e),alert("Error: Could not delete goal.")}finally{U(!1),M(null)}},$=()=>e.push("/team-leader-dashboard/goal-mgmt/editor"),ee=t=>e.push("/team-leader-dashboard/goal-mgmt/editor?id=".concat(t)),et=t=>e.push("/team-leader-dashboard/goal-mgmt/editor?clone=".concat(t)),ea=e=>{M(e),U(!0)};return(0,n.jsxs)(l.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,n.jsx)(i.q,{activeItem:"goal-mgmt"}),(0,n.jsxs)(l.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",marginLeft:"280px"},children:[(0,n.jsx)(p.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:"1px solid",borderColor:"divider"},children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(l.Z,{sx:{flexGrow:1},children:(0,n.jsx)(x.Z,{variant:"body2",sx:{fontFamily:"monospace",color:"text.secondary"},children:"team-leader-dashboard.localhost:3000"})}),(0,n.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,n.jsx)(m.Z,{size:"small",sx:{color:"text.secondary"},children:(0,n.jsx)(L.Z,{})}),(0,n.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[(0,n.jsx)(v.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},children:"W"}),(0,n.jsx)(x.Z,{variant:"body2",fontWeight:500,children:"Work"})]}),(0,n.jsx)(m.Z,{size:"small",sx:{color:"text.secondary"},children:(0,n.jsx)(X.Z,{})}),(0,n.jsx)(h.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,n.jsx)(B.Z,{}),sx:{ml:1},onClick:T,children:"Logout"})]})]})}),(0,n.jsxs)(y.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,n.jsx)(o.O,{}),(0,n.jsx)(l.Z,{sx:{my:4},children:(0,n.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(x.Z,{variant:"h4",component:"h1",fontWeight:700,gutterBottom:!0,children:"Goal Management"}),(0,n.jsx)(x.Z,{color:"text.secondary",children:"Create and manage conversation goals for your teams"})]}),(0,n.jsx)(h.Z,{variant:"contained",startIcon:(0,n.jsx)(W.Z,{}),onClick:$,sx:{px:2,py:1},children:"Create New Goal"})]})}),P?(0,n.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",py:8},children:(0,n.jsx)(c.Z,{})}):R?(0,n.jsx)(d.Z,{severity:"error",children:R}):0===t.length?(0,n.jsxs)(l.Z,{sx:{textAlign:"center",py:8},children:[(0,n.jsx)(z.Z,{sx:{fontSize:80,color:"text.secondary",mb:2}}),(0,n.jsx)(x.Z,{variant:"h5",gutterBottom:!0,children:"No Goals Created Yet"}),(0,n.jsx)(h.Z,{variant:"contained",startIcon:(0,n.jsx)(W.Z,{}),onClick:$,size:"large",children:"Create Your First Goal"})]}):(0,n.jsx)(u.Z,{container:!0,spacing:2,children:t.map(e=>(0,n.jsx)(u.Z,{size:{xs:12},children:(0,n.jsx)(Z.Z,{sx:{transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:(0,n.jsx)(g.Z,{children:(0,n.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},children:[(0,n.jsxs)(l.Z,{sx:{flex:"1 1 50%",minWidth:300},children:[(0,n.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,flexWrap:"wrap"},children:[(0,n.jsx)(x.Z,{variant:"h6",fontWeight:600,children:e.goal_name}),(0,n.jsx)(j.Z,{label:"Published: ".concat(null!=e.published_version_no?"v".concat(e.published_version_no):"None"),size:"small",color:"success",icon:(0,n.jsx)(k.Z,{sx:{fontSize:16}})}),(0,n.jsx)(j.Z,{label:"Draft: ".concat(null!=e.draft_version_no?"v".concat(e.draft_version_no):"None"),size:"small",color:"default",icon:(0,n.jsx)(S.Z,{sx:{fontSize:16}})})]}),(0,n.jsx)(x.Z,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:e.description}),(0,n.jsxs)(x.Z,{variant:"caption",color:"text.secondary",children:["Last updated: ",new Date(e.updated_at).toLocaleDateString()]})]}),(0,n.jsxs)(l.Z,{sx:{flex:"1 1 150px",minWidth:150},children:[(0,n.jsx)(x.Z,{variant:"caption",color:"text.secondary",display:"block",gutterBottom:!0,children:"Assigned Team"}),(0,n.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(A.Z,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),(0,n.jsx)(x.Z,{variant:"body2",fontWeight:500,children:e.team_name||"N/A"})]})]}),(0,n.jsxs)(l.Z,{sx:{display:"flex",gap:3,flex:"1 1 300px",justifyContent:"space-around"},children:[(0,n.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,n.jsx)(x.Z,{variant:"h6",fontWeight:700,color:"primary",children:e.conversations.toLocaleString()}),(0,n.jsx)(x.Z,{variant:"caption",color:"text.secondary",children:"Conversations"})]}),(0,n.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,n.jsxs)(x.Z,{variant:"h6",fontWeight:700,color:"success.main",children:[e.avg_score.toFixed(1),"%"]}),(0,n.jsx)(x.Z,{variant:"caption",color:"text.secondary",children:"Avg Score"})]}),(0,n.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,n.jsxs)(x.Z,{variant:"h6",fontWeight:700,color:"info.main",children:[e.completion_score.toFixed(1),"%"]}),(0,n.jsx)(x.Z,{variant:"caption",color:"text.secondary",children:"Completion"})]})]}),(0,n.jsxs)(l.Z,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,n.jsx)(h.Z,{size:"small",startIcon:(0,n.jsx)(N.Z,{}),onClick:()=>ee(e.goal_id),disabled:!e.draft_version_no&&!e.published_version_no,children:"Edit"}),(0,n.jsx)(h.Z,{size:"small",startIcon:(0,n.jsx)(G.Z,{}),onClick:()=>K(e.goal_id),disabled:!e.draft_version_no,children:"Publish Draft"}),(0,n.jsx)(h.Z,{size:"small",startIcon:(0,n.jsx)(E.Z,{}),onClick:()=>et(e.goal_id),variant:"outlined",children:"Clone"}),(0,n.jsx)(h.Z,{size:"small",startIcon:(0,n.jsx)(F.Z,{}),onClick:()=>ea(e),color:"error",variant:"outlined",children:"Delete"})]})]})})})},e.goal_id))})]}),(0,n.jsxs)(b.Z,{open:H,onClose:()=>U(!1),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(_.Z,{children:"Archive Goal"}),(0,n.jsxs)(w.Z,{children:[(0,n.jsxs)(x.Z,{children:['Are you sure you want to archive the goal "',null==V?void 0:V.goal_name,'"?']}),(0,n.jsxs)(d.Z,{severity:"warning",sx:{mt:2},children:[(0,n.jsx)(C.Z,{children:"Warning"}),"Archiving this goal will remove it from active lists and disable associated campaigns."]})]}),(0,n.jsxs)(I.Z,{children:[(0,n.jsx)(h.Z,{onClick:()=>U(!1),children:"Cancel"}),(0,n.jsx)(h.Z,{onClick:Q,color:"error",variant:"contained",children:"Archive Goal"})]})]})]})]})}},4633:function(e,t,a){"use strict";var n=a(3464);let s=a(257).env.NEXT_PUBLIC_API_BASE_URL||"http://thuriyam.wrkind.com:8000",r=n.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsInNjb3BlcyI6WyJtZSIsInVzZXJzIiwiYWRtaW4iXSwiZXhwIjoxNzU4ODcyNzExfQ.R_90bqCS7yw9qjFS0jzx1FcSca1POM8dQ2ATSmHOR_0";return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=r},1637:function(e,t,a){"use strict";a.d(t,{CK:function(){return i},Cq:function(){return x},FV:function(){return r},HZ:function(){return o},LK:function(){return h},aX:function(){return s},g3:function(){return c},qx:function(){return l},s6:function(){return d}});var n=a(4633);let s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(await n.Z.get("/api/v1/goals/",{params:{skip:e,limit:t}})).data},r=async()=>(await n.Z.get("/api/v1/goals/active-summary")).data,i=async(e,t)=>(await n.Z.get("/api/v1/goals/".concat(e,"/versions/").concat(t))).data,o=async e=>(await n.Z.post("/api/v1/goals/",e)).data,l=async(e,t)=>(await n.Z.put("/api/v1/goals/".concat(e,"/versions/draft"),t)).data,c=async e=>(await n.Z.put("/api/v1/goals/".concat(e,"/versions/draft/publish"))).data,d=async e=>(await n.Z.delete("/api/v1/goals/".concat(e))).data,x=async()=>(await n.Z.get("/api/v1/goals/utils/owners")).data,h=async()=>(await n.Z.get("/api/v1/goals/utils/teams")).data},307:function(e,t,a){"use strict";var n=a(6508),s=a(7437);t.Z=(0,n.Z)((0,s.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment")}},function(e){e.O(0,[152,56,855,668,304,611,96,2,971,117,744],function(){return e(e.s=2279)}),_N_E=e.O()}]);