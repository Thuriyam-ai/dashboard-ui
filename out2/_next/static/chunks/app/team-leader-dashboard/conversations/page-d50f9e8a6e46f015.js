(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{8323:function(e,t,n){Promise.resolve().then(n.bind(n,5535))},5535:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ea}});var a=n(7437),r=n(2265),s=n(9376),i=n(4753),o=n(3397),l=n(5122),c=n(9969),d=n(8543),x=n(9083),h=n(5666),u=n(5545),m=n(658),Z=n(2854),j=n(7639),p=n(1504),g=n(1563),f=n(1002),y=n(9882),v=n(7792),w=n(2347),C=n(9391),b=n(9318),S=n(5280),I=n(8319),_=n(9352),W=n(2995),E=n(8654),k=n(8045),z=n(6838),D=n(6116),F=n(6382),L=n(6875),N=n(5338),A=n(793),O=n(1096),P=n(2961),R=n(7367),T=n(4589),B=n(7306),U=n(1200),M=n(2141),G=n(1463),J=n(2192),X=n(3977),q=n(9636),Q=n(3821),V=n(3250),H=n(47),K=n(6873),Y=n(4881),$=n(6159),ee=n(1273),et=n(4633);let en=async e=>{let{campaignId:t,teamId:n,skip:a=0,limit:r=100}=e,s=new URLSearchParams({skip:a.toString(),limit:r.toString()});t&&"all"!==t&&s.append("campaign_id",t),n&&"all"!==n&&s.append("team_id",n);try{return(await et.Z.get("/api/v1/conversations/?".concat(s.toString()))).data}catch(e){throw console.error("Failed to fetch conversations:",e),Error("Could not fetch conversations data. Please try again.")}};function ea(){let e=(0,s.useRouter)(),{logout:t}=(0,Y.a)(),n=(0,l.Z)();(0,c.Z)(n.breakpoints.down("md"));let[et,ea]=(0,r.useState)(!1),er=()=>{ea(!et)},[es,ei]=(0,r.useState)(""),[eo,el]=(0,r.useState)("all"),[ec,ed]=(0,r.useState)("all"),[ex,eh]=(0,r.useState)([]),[eu,em]=(0,r.useState)(!0),[eZ,ej]=(0,r.useState)(null),[ep,eg]=(0,r.useState)([]),[ef,ey]=(0,r.useState)(!0),[ev,ew]=(0,r.useState)(null),[eC,eb]=(0,r.useState)([]),[eS,eI]=(0,r.useState)(!0),[e_,eW]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{em(!0),ey(!0);let[e,t]=await Promise.all([(0,$.E6)(),(0,ee.q)()]);eh(e),eg(t)}catch(e){console.error("Failed to fetch filter data:",e),ej("Could not load campaigns."),ew("Could not load teams.")}finally{em(!1),ey(!1)}})()},[]),(0,r.useEffect)(()=>{(async()=>{eI(!0),eW(null);try{let e=await en({campaignId:eo,teamId:ec});eb(e)}catch(e){console.error("Failed to fetch conversations:",e),eW("Failed to load conversations. Please try again.")}finally{eI(!1)}})()},[eo,ec]);let eE=(0,r.useMemo)(()=>new Map(ep.map(e=>[e.id,e.name])),[ep]),ek=e=>{switch(null==e?void 0:e.toUpperCase()){case"COMPLETED":return"success";case"IN-PROGRESS":return"info";case"FAILED":return"error";default:return"default"}},ez=e=>{switch(null==e?void 0:e.toUpperCase()){case"COMPLETED":return(0,a.jsx)(P.Z,{});case"IN-PROGRESS":return(0,a.jsx)(R.Z,{});case"FAILED":return(0,a.jsx)(T.Z,{});default:return(0,a.jsx)(B.Z,{})}},eD=e=>e>=80?"success.main":e>=60?"warning.main":"error.main",eF=e=>new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),eL=e=>isNaN(e)||e<0?"0:00":"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),eN=eC.filter(e=>e.agent_id.toLowerCase().includes(es.toLowerCase())||e.employer_user_id.toLowerCase().includes(es.toLowerCase())||e.conversation_id.toLowerCase().includes(es.toLowerCase()));return(0,a.jsxs)(d.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,a.jsx)(i.q,{activeItem:"conversations",drawerWidth:280,mobileOpen:et,onDrawerToggle:er}),(0,a.jsxs)(d.Z,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",width:{xs:"100%",md:"calc(100% - ".concat(280,"px)")},marginLeft:{md:"".concat(280,"px")}},children:[(0,a.jsx)(x.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:"1px solid",borderColor:"divider"},children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(u.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:er,sx:{mr:2,display:{md:"none"}},children:(0,a.jsx)(U.Z,{})}),(0,a.jsx)(d.Z,{sx:{flexGrow:1},children:(0,a.jsx)(m.Z,{variant:"body2",sx:{fontFamily:"monospace",color:"text.secondary"},children:"team-leader-dashboard-conversations.localhost:3000"})}),(0,a.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,a.jsx)(u.Z,{size:"small",sx:{color:"text.secondary"},children:(0,a.jsx)(M.Z,{})}),(0,a.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[(0,a.jsx)(Z.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},children:"W"}),(0,a.jsx)(m.Z,{variant:"body2",fontWeight:500,children:"Work"})]}),(0,a.jsx)(u.Z,{size:"small",sx:{color:"text.secondary"},children:(0,a.jsx)(G.Z,{})}),(0,a.jsx)(j.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,a.jsx)(J.Z,{}),sx:{ml:1},onClick:t,children:"Logout"})]})]})}),(0,a.jsxs)(p.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,a.jsx)(o.O,{}),(0,a.jsxs)(d.Z,{sx:{mb:4},children:[(0,a.jsx)(m.Z,{variant:"h3",component:"h1",fontWeight:700,gutterBottom:!0,children:"Conversations Management"}),(0,a.jsx)(m.Z,{variant:"h6",color:"text.secondary",children:"Monitor and analyze team conversations with comprehensive analytics"})]}),(0,a.jsx)(g.Z,{sx:{mb:3},children:(0,a.jsx)(f.Z,{children:(0,a.jsxs)(d.Z,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,a.jsx)(y.Z,{placeholder:"Search by ID, Agent, Customer...",value:es,onChange:e=>ei(e.target.value),InputProps:{startAdornment:(0,a.jsx)(v.Z,{position:"start",children:(0,a.jsx)(X.Z,{})})},sx:{minWidth:300,flexGrow:{xs:1,md:0}}}),(0,a.jsxs)(w.Z,{sx:{minWidth:150},disabled:eu,children:[(0,a.jsx)(C.Z,{children:"Campaign"}),(0,a.jsxs)(b.Z,{value:eo,label:"Campaign",onChange:e=>el(e.target.value),children:[(0,a.jsx)(S.Z,{value:"all",children:"All Campaigns"}),ex.map(e=>(0,a.jsx)(S.Z,{value:e.id,children:e.name},e.id))]}),eu&&(0,a.jsx)(I.Z,{size:24,sx:{position:"absolute",top:"50%",right:40,marginTop:"-12px"}})]}),(0,a.jsxs)(w.Z,{sx:{minWidth:150},disabled:ef,children:[(0,a.jsx)(C.Z,{children:"Team"}),(0,a.jsxs)(b.Z,{value:ec,label:"Team",onChange:e=>ed(e.target.value),children:[(0,a.jsx)(S.Z,{value:"all",children:"All Teams"}),ep.map(e=>(0,a.jsx)(S.Z,{value:e.id,children:e.name},e.id))]}),ef&&(0,a.jsx)(I.Z,{size:24,sx:{position:"absolute",top:"50%",right:40,marginTop:"-12px"}})]}),(0,a.jsx)(j.Z,{variant:"outlined",startIcon:(0,a.jsx)(q.Z,{}),onClick:()=>{ei(""),el("all"),ed("all")},children:"Reset Filters"}),(0,a.jsx)(j.Z,{variant:"contained",startIcon:(0,a.jsx)(Q.Z,{}),sx:{ml:"auto"},children:"Export Data"})]})})}),(0,a.jsxs)(_.Z,{container:!0,spacing:3,sx:{mb:4},children:[(0,a.jsx)(_.Z,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(g.Z,{children:(0,a.jsx)(f.Z,{children:(0,a.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(m.Z,{color:"text.secondary",gutterBottom:!0,children:"Total Conversations"}),(0,a.jsx)(m.Z,{variant:"h4",fontWeight:700,color:"primary",children:eC.length})]}),(0,a.jsx)(V.Z,{sx:{fontSize:40,color:"primary.main"}})]})})})}),(0,a.jsx)(_.Z,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(g.Z,{children:(0,a.jsx)(f.Z,{children:(0,a.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(m.Z,{color:"text.secondary",gutterBottom:!0,children:"Completed"}),(0,a.jsx)(m.Z,{variant:"h4",fontWeight:700,color:"success.main",children:"3"})]}),(0,a.jsx)(P.Z,{sx:{fontSize:40,color:"success.main"}})]})})})}),(0,a.jsx)(_.Z,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(g.Z,{children:(0,a.jsx)(f.Z,{children:(0,a.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(m.Z,{color:"text.secondary",gutterBottom:!0,children:"Avg Quality Score"}),(0,a.jsx)(m.Z,{variant:"h4",fontWeight:700,color:"info.main",children:"92"})]}),(0,a.jsx)(H.Z,{sx:{fontSize:40,color:"info.main"}})]})})})}),(0,a.jsx)(_.Z,{item:!0,xs:12,sm:6,md:3,children:(0,a.jsx)(g.Z,{children:(0,a.jsx)(f.Z,{children:(0,a.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(m.Z,{color:"text.secondary",gutterBottom:!0,children:"Avg Duration"}),(0,a.jsx)(m.Z,{variant:"h4",fontWeight:700,color:"warning.main",children:"12m"})]}),(0,a.jsx)(R.Z,{sx:{fontSize:40,color:"warning.main"}})]})})})})]}),(0,a.jsx)(g.Z,{children:(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)(m.Z,{variant:"h5",fontWeight:600,gutterBottom:!0,sx:{mb:3},children:["Conversation Details (",eN.length," conversations)"]}),(0,a.jsx)(W.Z,{component:E.Z,variant:"outlined",children:(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(z.Z,{children:(0,a.jsxs)(D.Z,{sx:{backgroundColor:"action.hover"},children:[(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Conversation ID"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Agent ID"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Customer ID"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Duration"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Date"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Status"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Quality Score"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Team"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Disposition"}),(0,a.jsx)(F.Z,{sx:{fontWeight:600},children:"Actions"})]})}),(0,a.jsx)(L.Z,{children:eS?(0,a.jsx)(D.Z,{children:(0,a.jsx)(F.Z,{colSpan:10,align:"center",children:(0,a.jsx)(I.Z,{})})}):e_?(0,a.jsx)(D.Z,{children:(0,a.jsx)(F.Z,{colSpan:10,children:(0,a.jsx)(N.Z,{severity:"error",children:e_})})}):0===eN.length?(0,a.jsx)(D.Z,{children:(0,a.jsx)(F.Z,{colSpan:10,align:"center",children:"No conversations found for the selected filters."})}):eN.map(t=>{let n=t.QC_score;return(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(F.Z,{children:(0,a.jsx)(m.Z,{variant:"body2",fontWeight:600,children:t.conversation_id})}),(0,a.jsx)(F.Z,{children:t.agent_id}),(0,a.jsx)(F.Z,{children:t.employer_user_id}),(0,a.jsx)(F.Z,{children:eL(t.length_in_sec)}),(0,a.jsx)(F.Z,{children:eF(t.call_timestamp)}),(0,a.jsx)(F.Z,{children:(0,a.jsx)(A.Z,{icon:ez(t.avyukta_status),label:t.avyukta_status||"Unknown",color:ek(t.avyukta_status),size:"small"})}),(0,a.jsx)(F.Z,{children:"number"==typeof n?(0,a.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(m.Z,{variant:"body2",fontWeight:600,color:eD(n),children:n}),(0,a.jsx)(O.Z,{variant:"determinate",value:n,sx:{width:50,height:6,borderRadius:3},color:n>=80?"success":n>=50?"warning":"error"})]}):(0,a.jsx)(m.Z,{variant:"body2",color:"text.secondary",children:"-"})}),(0,a.jsx)(F.Z,{children:(0,a.jsx)(A.Z,{label:eE.get(t.team_id)||"Unknown",size:"small",variant:"outlined"})}),(0,a.jsx)(F.Z,{children:t.lamh_disposition}),(0,a.jsx)(F.Z,{children:(0,a.jsx)(j.Z,{size:"small",startIcon:(0,a.jsx)(K.Z,{}),variant:"outlined",onClick:()=>e.push("/team-leader-dashboard/conversation-detail"),children:"View Details"})})]},t.conversation_id)})})]})})]})})]})]})]})}},4633:function(e,t,n){"use strict";var a=n(3464);let r=n(257).env.NEXT_PUBLIC_API_BASE_URL||"http://thuriyam.wrkind.com:8000",s=a.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsInNjb3BlcyI6WyJtZSIsInVzZXJzIiwiYWRtaW4iXSwiZXhwIjoxNzU4ODcyNzExfQ.R_90bqCS7yw9qjFS0jzx1FcSca1POM8dQ2ATSmHOR_0";return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=s},6159:function(e,t,n){"use strict";n.d(t,{E6:function(){return r},QF:function(){return i},bO:function(){return s},hm:function(){return l},mK:function(){return o}});var a=n(4633);let r=async function(){let{skip:e=0,limit:t=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await a.Z.get("/api/v1/campaigns/",{params:{skip:e,limit:t}})).data}catch(e){throw console.error("Failed to fetch campaigns:",e),Error("Could not fetch campaigns.")}},s=async e=>{try{await a.Z.delete("/api/v1/campaigns/".concat(e))}catch(t){throw console.error("Failed to delete campaign ".concat(e,":"),t),Error("Could not delete the campaign.")}},i=async e=>{try{return(await a.Z.get("/api/v1/campaigns/".concat(e))).data}catch(t){throw console.error("Failed to fetch campaign ".concat(e,":"),t),Error("Could not fetch campaign details.")}},o=async e=>{try{return(await a.Z.post("/api/v1/campaigns/",e)).data}catch(e){throw console.error("Failed to create campaign:",e),Error("Could not create campaign.")}},l=async(e,t)=>{try{return(await a.Z.put("/api/v1/campaigns/".concat(e),t)).data}catch(t){throw console.error("Failed to update campaign ".concat(e,":"),t),Error("Could not update campaign.")}}},1273:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var a=n(4633);let r=async()=>{try{return(await a.Z.get("/api/v1/goals/utils/teams")).data}catch(e){throw console.error("Failed to fetch teams:",e),Error("Could not fetch teams.")}}}},function(e){e.O(0,[152,56,855,668,815,304,882,4,135,421,2,971,117,744],function(){return e(e.s=8323)}),_N_E=e.O()}]);