(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{4411:function(e,t,n){Promise.resolve().then(n.bind(n,7122))},7122:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ex}});var a,s=n(7437),r=n(2265),i=n(9376),o=n(4753),l=n(3397),c=n(8543),d=n(9083),h=n(5666),u=n(658),x=n(5545),m=n(2854),p=n(7639),Z=n(1504),j=n(1563),g=n(1002),f=n(9882),v=n(1994),y=n(7609),S=n(1661),C=n(70),b=n(4811),w=n(1589),z=n(1190),I=n(4153),W=n(5245),N=n(1475);function L(e){return(0,N.ZP)("MuiInputAdornment",e)}let E=(0,W.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),R=e=>{let{classes:t,disablePointerEvents:n,hiddenLabel:a,position:s,size:r,variant:i}=e,o={root:["root",n&&"disablePointerEvents",s&&"position".concat((0,S.Z)(s)),i,a&&"hiddenLabel",r&&"size".concat((0,S.Z)(r))]};return(0,y.Z)(o,L,t)},k=(0,w.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t["position".concat((0,S.Z)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((0,z.Z)(e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{["&.".concat(E.positionStart,"&:not(.").concat(E.hiddenLabel,")")]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}})),T=r.forwardRef(function(e,t){let n=(0,I.i)({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:l="div",disablePointerEvents:c=!1,disableTypography:d=!1,position:h,variant:x,...m}=n,p=(0,b.Z)()||{},Z=x;x&&p.variant,p&&!Z&&(Z=p.variant);let j={...n,hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:c,position:h,variant:Z},g=R(j);return(0,s.jsx)(C.Z.Provider,{value:null,children:(0,s.jsx)(k,{as:l,ownerState:j,className:(0,v.Z)(g.root,o),ref:t,...m,children:"string"!=typeof i||d?(0,s.jsxs)(r.Fragment,{children:["start"===h?a||(a=(0,s.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,i]}):(0,s.jsx)(u.Z,{color:"textSecondary",children:i})})})});var A=n(2347),M=n(6425),P=n(9318),q=n(5280),D=n(8319),O=n(9352),F=n(2995),V=n(8654),_=n(8045),B=n(6838),J=n(6116),U=n(6382),X=n(6875),H=n(793),G=n(1096),Q=n(2961),K=n(7367),Y=n(4589),$=n(7306),ee=n(2141),et=n(9391),en=n(2192),ea=n(6508),es=(0,ea.Z)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),er=(0,ea.Z)((0,s.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),ei=(0,ea.Z)((0,s.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),eo=n(3250),el=n(47),ec=(0,ea.Z)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),ed=n(4881),eh=n(6159),eu=n(1273);function ex(){let e=(0,i.useRouter)(),[t,n]=(0,r.useState)(null),[a,v]=(0,r.useState)(""),[y,S]=(0,r.useState)("all"),[C,b]=(0,r.useState)("all"),{logout:w}=(0,ed.a)(),[z,I]=(0,r.useState)([]),[W,N]=(0,r.useState)(!0),[L,E]=(0,r.useState)(null),[R,k]=(0,r.useState)([]),[ea,ex]=(0,r.useState)(!0),[em,ep]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{N(!0),ex(!0);let[e,t]=await Promise.all([(0,eh.E6)(),(0,eu.q)()]);I(e),E(null),k(t),ep(null)}catch(e){console.error("Failed to fetch filter data:",e),E("Could not load campaigns."),ep("Could not load teams.")}finally{N(!1),ex(!1)}})()},[]);let eZ=[{id:"CONV-001",agentName:"Kavya Reddy",customerName:"Rajesh Kumar",duration:"8:45",date:"2024-01-15",status:"completed",qualityScore:92,fillerWords:3,interruptions:1,talkToListenRatio:.58,campaign:"Customer Support",team:"Technical Support",disposition:"Issue Resolved"},{id:"CONV-002",agentName:"Priya Sharma",customerName:"Sneha Singh",duration:"12:30",date:"2024-01-15",status:"completed",qualityScore:88,fillerWords:5,interruptions:2,talkToListenRatio:.62,campaign:"Sales",team:"Sales Team",disposition:"Sale Closed"},{id:"CONV-003",agentName:"Arjun Patel",customerName:"Meera Joshi",duration:"6:15",date:"2024-01-15",status:"in-progress",qualityScore:0,fillerWords:0,interruptions:0,talkToListenRatio:0,campaign:"Customer Support",team:"Customer Support",disposition:"In Progress"},{id:"CONV-004",agentName:"Rajesh Kumar",customerName:"Vikram Singh",duration:"4:20",date:"2024-01-14",status:"failed",qualityScore:45,fillerWords:12,interruptions:8,talkToListenRatio:.75,campaign:"Customer Support",team:"Customer Support",disposition:"Call Dropped"},{id:"CONV-005",agentName:"Sneha Singh",customerName:"Anita Desai",duration:"15:45",date:"2024-01-14",status:"completed",qualityScore:95,fillerWords:2,interruptions:0,talkToListenRatio:.55,campaign:"Sales",team:"Sales Team",disposition:"Lead Generated"}],ej=e=>{switch(e){case"completed":return"success";case"in-progress":return"info";case"failed":return"error";default:return"default"}},eg=e=>{switch(e){case"completed":return(0,s.jsx)(Q.Z,{});case"in-progress":return(0,s.jsx)(K.Z,{});case"failed":return(0,s.jsx)(Y.Z,{});default:return(0,s.jsx)($.Z,{})}},ef=e=>e>=80?"success.main":e>=60?"warning.main":"error.main",ev=e=>new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),ey=eZ.filter(e=>{let t=e.agentName.toLowerCase().includes(a.toLowerCase())||e.customerName.toLowerCase().includes(a.toLowerCase())||e.id.toLowerCase().includes(a.toLowerCase()),n="all"===y||e.campaign===y,s="all"===C||e.team===C;return t&&n&&s}),eS=eZ.filter(e=>"completed"===e.status),eC=eS.length>0?Math.round(eS.reduce((e,t)=>e+t.qualityScore,0)/eS.length):0,eb=eS.length>0?Math.round(eS.reduce((e,t)=>{let[n,a]=t.duration.split(":").map(Number);return e+(60*n+a)},0)/eS.length/60):0;return(0,s.jsxs)(c.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,s.jsx)(o.q,{activeItem:"conversations"}),(0,s.jsxs)(c.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",marginLeft:"280px"},children:[(0,s.jsx)(d.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:"1px solid",borderColor:"divider"},children:(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(c.Z,{sx:{flexGrow:1},children:(0,s.jsx)(u.Z,{variant:"body2",sx:{fontFamily:"monospace",color:"text.secondary"},children:"team-leader-dashboard-conversations.localhost:3000"})}),(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,s.jsx)(x.Z,{size:"small",sx:{color:"text.secondary"},children:(0,s.jsx)(ee.Z,{})}),(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[(0,s.jsx)(m.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},children:"W"}),(0,s.jsx)(u.Z,{variant:"body2",fontWeight:500,children:"Work"})]}),(0,s.jsx)(x.Z,{size:"small",sx:{color:"text.secondary"},children:(0,s.jsx)(et.Z,{})}),(0,s.jsx)(p.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,s.jsx)(en.Z,{}),sx:{ml:1},onClick:w,children:"Logout"})]})]})}),(0,s.jsxs)(Z.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,s.jsx)(l.O,{}),(0,s.jsxs)(c.Z,{sx:{mb:4},children:[(0,s.jsx)(u.Z,{variant:"h3",component:"h1",fontWeight:700,gutterBottom:!0,children:"Conversations Management"}),(0,s.jsx)(u.Z,{variant:"h6",color:"text.secondary",children:"Monitor and analyze team conversations with comprehensive analytics"})]}),(0,s.jsx)(j.Z,{sx:{mb:3},children:(0,s.jsx)(g.Z,{children:(0,s.jsxs)(c.Z,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsx)(f.Z,{placeholder:"Search conversations...",value:a,onChange:e=>v(e.target.value),InputProps:{startAdornment:(0,s.jsx)(T,{position:"start",children:(0,s.jsx)(es,{})})},sx:{minWidth:300}}),(0,s.jsxs)(A.Z,{sx:{minWidth:150},disabled:W,children:[(0,s.jsx)(M.Z,{children:"Campaign"}),(0,s.jsxs)(P.Z,{value:y,label:"Campaign",onChange:e=>S(e.target.value),children:[(0,s.jsx)(q.Z,{value:"all",children:"All Campaigns"}),z.map(e=>(0,s.jsx)(q.Z,{value:e.name,children:e.name},e.id))]}),W&&(0,s.jsx)(D.Z,{size:24,sx:{position:"absolute",top:"50%",right:40,marginTop:"-12px"}})]}),L&&(0,s.jsx)(u.Z,{color:"error",variant:"caption",sx:{ml:-1.5},children:L}),(0,s.jsxs)(A.Z,{sx:{minWidth:150},disabled:ea,children:[(0,s.jsx)(M.Z,{children:"Team"}),(0,s.jsxs)(P.Z,{value:C,label:"Team",onChange:e=>b(e.target.value),children:[(0,s.jsx)(q.Z,{value:"all",children:"All Teams"}),R.map(e=>(0,s.jsx)(q.Z,{value:e.name,children:e.name},e.id))]}),ea&&(0,s.jsx)(D.Z,{size:24,sx:{position:"absolute",top:"50%",right:40,marginTop:"-12px"}})]}),em&&(0,s.jsx)(u.Z,{color:"error",variant:"caption",sx:{ml:-1.5},children:em}),(0,s.jsx)(p.Z,{variant:"outlined",startIcon:(0,s.jsx)(er,{}),onClick:()=>{v(""),S("all"),b("all")},children:"Reset Filters"}),(0,s.jsx)(p.Z,{variant:"contained",startIcon:(0,s.jsx)(ei,{}),sx:{ml:"auto"},children:"Export Data"})]})})}),(0,s.jsxs)(O.Z,{container:!0,spacing:3,sx:{mb:4},children:[(0,s.jsx)(O.Z,{size:{xs:12,sm:6,md:3},children:(0,s.jsx)(j.Z,{children:(0,s.jsx)(g.Z,{children:(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(u.Z,{color:"text.secondary",gutterBottom:!0,children:"Total Conversations"}),(0,s.jsx)(u.Z,{variant:"h4",fontWeight:700,color:"primary",children:eZ.length})]}),(0,s.jsx)(eo.Z,{sx:{fontSize:40,color:"primary.main"}})]})})})}),(0,s.jsx)(O.Z,{size:{xs:12,sm:6,md:3},children:(0,s.jsx)(j.Z,{children:(0,s.jsx)(g.Z,{children:(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(u.Z,{color:"text.secondary",gutterBottom:!0,children:"Completed"}),(0,s.jsx)(u.Z,{variant:"h4",fontWeight:700,color:"success.main",children:eS.length})]}),(0,s.jsx)(Q.Z,{sx:{fontSize:40,color:"success.main"}})]})})})}),(0,s.jsx)(O.Z,{size:{xs:12,sm:6,md:3},children:(0,s.jsx)(j.Z,{children:(0,s.jsx)(g.Z,{children:(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(u.Z,{color:"text.secondary",gutterBottom:!0,children:"Avg Quality Score"}),(0,s.jsx)(u.Z,{variant:"h4",fontWeight:700,color:"info.main",children:eC})]}),(0,s.jsx)(el.Z,{sx:{fontSize:40,color:"info.main"}})]})})})}),(0,s.jsx)(O.Z,{size:{xs:12,sm:6,md:3},children:(0,s.jsx)(j.Z,{children:(0,s.jsx)(g.Z,{children:(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(u.Z,{color:"text.secondary",gutterBottom:!0,children:"Avg Duration"}),(0,s.jsxs)(u.Z,{variant:"h4",fontWeight:700,color:"warning.main",children:[eb,"m"]})]}),(0,s.jsx)(K.Z,{sx:{fontSize:40,color:"warning.main"}})]})})})})]}),(0,s.jsx)(j.Z,{children:(0,s.jsxs)(g.Z,{children:[(0,s.jsxs)(u.Z,{variant:"h5",fontWeight:600,gutterBottom:!0,sx:{mb:3},children:["Conversation Details (",ey.length," conversations)"]}),(0,s.jsx)(F.Z,{component:V.Z,variant:"outlined",children:(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(B.Z,{children:(0,s.jsxs)(J.Z,{sx:{backgroundColor:"action.hover"},children:[(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Conversation ID"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Agent"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Customer"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Duration"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Date"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Status"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Quality Score"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Team"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Disposition"}),(0,s.jsx)(U.Z,{sx:{fontWeight:600},children:"Actions"})]})}),(0,s.jsx)(X.Z,{children:ey.map(t=>(0,s.jsxs)(J.Z,{children:[(0,s.jsx)(U.Z,{children:(0,s.jsx)(u.Z,{variant:"body2",fontWeight:600,children:t.id})}),(0,s.jsx)(U.Z,{children:t.agentName}),(0,s.jsx)(U.Z,{children:t.customerName}),(0,s.jsx)(U.Z,{children:t.duration}),(0,s.jsx)(U.Z,{children:ev(t.date)}),(0,s.jsx)(U.Z,{children:(0,s.jsx)(H.Z,{icon:eg(t.status),label:t.status.charAt(0).toUpperCase()+t.status.slice(1),color:ej(t.status),size:"small"})}),(0,s.jsx)(U.Z,{children:"completed"===t.status?(0,s.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,s.jsx)(u.Z,{variant:"body2",fontWeight:600,color:ef(t.qualityScore),children:t.qualityScore}),(0,s.jsx)(G.Z,{variant:"determinate",value:t.qualityScore,sx:{width:50,height:6,borderRadius:3},color:t.qualityScore>=80?"success":t.qualityScore>=60?"warning":"error"})]}):(0,s.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"-"})}),(0,s.jsx)(U.Z,{children:(0,s.jsx)(H.Z,{label:t.team,size:"small",variant:"outlined"})}),(0,s.jsx)(U.Z,{children:t.disposition}),(0,s.jsx)(U.Z,{children:(0,s.jsx)(p.Z,{size:"small",startIcon:(0,s.jsx)(ec,{}),variant:"outlined",onClick:()=>{e.push("/team-leader-dashboard/conversation-detail")},children:"View Details"})})]},t.id))})]})})]})})]})]})]})}},4633:function(e,t,n){"use strict";var a=n(3464);let s=n(257).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000",r=a.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsInNjb3BlcyI6WyJtZSIsInVzZXJzIiwiYWRtaW4iXSwiZXhwIjoxNzU4ODcyNzExfQ.R_90bqCS7yw9qjFS0jzx1FcSca1POM8dQ2ATSmHOR_0";return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=r},6159:function(e,t,n){"use strict";n.d(t,{E6:function(){return s},QF:function(){return i},bO:function(){return r},hm:function(){return l},mK:function(){return o}});var a=n(4633);let s=async function(){let{skip:e=0,limit:t=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await a.Z.get("/api/v1/campaigns/",{params:{skip:e,limit:t}})).data}catch(e){throw console.error("Failed to fetch campaigns:",e),Error("Could not fetch campaigns.")}},r=async e=>{try{await a.Z.delete("/api/v1/campaigns/".concat(e))}catch(t){throw console.error("Failed to delete campaign ".concat(e,":"),t),Error("Could not delete the campaign.")}},i=async e=>{try{return(await a.Z.get("/api/v1/campaigns/".concat(e))).data}catch(t){throw console.error("Failed to fetch campaign ".concat(e,":"),t),Error("Could not fetch campaign details.")}},o=async e=>{try{return(await a.Z.post("/api/v1/campaigns/",e)).data}catch(e){throw console.error("Failed to create campaign:",e),Error("Could not create campaign.")}},l=async(e,t)=>{try{return(await a.Z.put("/api/v1/campaigns/".concat(e),t)).data}catch(t){throw console.error("Failed to update campaign ".concat(e,":"),t),Error("Could not update campaign.")}}},1273:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var a=n(4633);let s=async()=>{try{return(await a.Z.get("/api/v1/goals/utils/teams")).data}catch(e){throw console.error("Failed to fetch teams:",e),Error("Could not fetch teams.")}}},4589:function(e,t,n){"use strict";var a=n(6508),s=n(7437);t.Z=(0,a.Z)((0,s.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},47:function(e,t,n){"use strict";var a=n(6508),s=n(7437);t.Z=(0,a.Z)((0,s.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},7306:function(e,t,n){"use strict";var a=n(6508),s=n(7437);t.Z=(0,a.Z)((0,s.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")}},function(e){e.O(0,[152,56,855,668,421,304,882,4,135,2,971,117,744],function(){return e(e.s=4411)}),_N_E=e.O()}]);