(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{3563:function(e,t,a){Promise.resolve().then(a.bind(a,750))},750:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return et}});var n=a(7437),r=a(2265),o=a(9376),i=a(4753),s=a(3397),c=a(5545),l=a(8156),d=a(5280),x=a(7824),h=a(5263),p=a(8543),m=a(9083),u=a(5666),g=a(658),Z=a(2854),j=a(7639),f=a(1504),y=a(1563),v=a(2995),b=a(8654),C=a(8045),w=a(6838),k=a(6116),I=a(6382),S=a(6875),W=a(8319),E=a(5338),_=a(793),z=a(1096),D=a(4247),M=a(3985),O=a(6825),F=a(7893),T=a(5386),V=a(9391),G=a(3484),N=a(8841),A=a(3274),P=a(599),B=a(196),H=a(7367),L=a(2961),R=a(9010),U=a(2141),Y=a(2192),q=a(9470),K=a(9755),Q=a(1381),J=(0,a(6508).Z)((0,n.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),X=a(4881),$=a(6159);let ee=e=>{let{campaign:t,onEdit:a,onClone:o,onDelete:i,onCopy:s}=e,[p,m]=(0,r.useState)(null),u=()=>m(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{"aria-label":"actions",onClick:e=>m(e.currentTarget),children:(0,n.jsx)(V.Z,{})}),(0,n.jsxs)(l.Z,{anchorEl:p,open:!!p,onClose:u,children:[(0,n.jsxs)(d.Z,{onClick:()=>{a(t.id),u()},children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(G.Z,{fontSize:"small"})}),(0,n.jsx)(h.Z,{children:"Edit"})]}),(0,n.jsxs)(d.Z,{onClick:()=>{o(t.id),u()},children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(N.Z,{fontSize:"small"})}),(0,n.jsx)(h.Z,{children:"Clone"})]}),(0,n.jsxs)(d.Z,{onClick:()=>{s(t.id),u()},children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(A.Z,{fontSize:"small"})}),(0,n.jsx)(h.Z,{children:"Copy ID"})]}),(0,n.jsxs)(d.Z,{onClick:()=>{i(t),u()},sx:{color:"error.main"},children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(P.Z,{fontSize:"small",color:"error"})}),(0,n.jsx)(h.Z,{children:"Delete"})]})]})]})};function et(){let e=(0,o.useRouter)(),{logout:t}=(0,X.a)(),[a,l]=(0,r.useState)([]),[d,x]=(0,r.useState)(!0),[h,G]=(0,r.useState)(null),[N,A]=(0,r.useState)(!1),[P,et]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{x(!0);let e=await (0,$.E6)();l(e)}catch(e){G("Failed to load campaigns. Please try again later.")}finally{x(!1)}})()},[]);let ea=()=>e.push("/team-leader-dashboard/campaign-mgmt/editor"),en=t=>e.push("/team-leader-dashboard/campaign-mgmt/editor?id=".concat(t)),er=t=>e.push("/team-leader-dashboard/campaign-mgmt/editor?clone=".concat(t)),eo=e=>{navigator.clipboard.writeText(e).then(()=>{alert("Campaign ID copied to clipboard: ".concat(e))}).catch(e=>{console.error("Failed to copy campaign ID: ",e),alert("Could not copy ID.")})},ei=e=>{et(e),A(!0)},es=async()=>{if(P)try{await (0,$.bO)(P.id),l(e=>e.filter(e=>e.id!==P.id)),A(!1),et(null)}catch(e){console.error("Failed to delete campaign",e)}},ec=e=>{switch(e){case"ACTIVE":return"success";case"UPCOMING":return"info";default:return"default"}},el=e=>{switch(e){case"ACTIVE":return(0,n.jsx)(B.Z,{});case"UPCOMING":return(0,n.jsx)(H.Z,{});case"COMPLETED":return(0,n.jsx)(L.Z,{});default:return(0,n.jsx)(R.Z,{})}},ed=e=>e>=90?"success":e>=70?"warning":"error",ex=e=>e?new Date(e).toLocaleDateString("en-CA"):"â€“";return(0,n.jsxs)(p.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,n.jsx)(i.q,{activeItem:"campaign-mgmt"}),(0,n.jsxs)(p.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",marginLeft:"280px"},children:[(0,n.jsx)(m.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:"1px solid",borderColor:"divider"},children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(p.Z,{sx:{flexGrow:1},children:(0,n.jsx)(g.Z,{variant:"body2",sx:{fontFamily:"monospace",color:"text.secondary"},children:"team-leader-dashboard.localhost:3000"})}),(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,n.jsx)(c.Z,{size:"small",sx:{color:"text.secondary"},children:(0,n.jsx)(U.Z,{})}),(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[(0,n.jsx)(Z.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},children:"W"}),(0,n.jsx)(g.Z,{variant:"body2",fontWeight:500,children:"Work"})]}),(0,n.jsx)(c.Z,{size:"small",sx:{color:"text.secondary"},children:(0,n.jsx)(V.Z,{})}),(0,n.jsx)(j.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,n.jsx)(Y.Z,{}),sx:{ml:1},onClick:t,children:"Logout"})]})]})}),(0,n.jsxs)(f.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,n.jsx)(s.O,{}),(0,n.jsx)(p.Z,{sx:{mb:4},children:(0,n.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(g.Z,{variant:"h3",component:"h1",fontWeight:700,gutterBottom:!0,children:"Campaign Management"}),(0,n.jsx)(g.Z,{variant:"h6",color:"text.secondary",children:"Create and manage conversation campaigns for your teams"})]}),(0,n.jsx)(j.Z,{variant:"contained",startIcon:(0,n.jsx)(q.Z,{}),onClick:ea,sx:{px:3,py:1.5,fontSize:"1rem",fontWeight:600},children:"Create New Campaign"})]})}),(0,n.jsx)(y.Z,{children:(0,n.jsx)(v.Z,{component:b.Z,variant:"outlined",children:(0,n.jsxs)(C.Z,{sx:{minWidth:650},"aria-label":"campaigns table",children:[(0,n.jsx)(w.Z,{children:(0,n.jsxs)(k.Z,{sx:{backgroundColor:"action.hover"},children:[(0,n.jsx)(I.Z,{sx:{fontWeight:600,width:"25%"},children:"Campaign Name"}),(0,n.jsx)(I.Z,{sx:{fontWeight:600},children:"Status"}),(0,n.jsx)(I.Z,{sx:{fontWeight:600,width:"20%"},children:"Goal"}),(0,n.jsx)(I.Z,{sx:{fontWeight:600},children:"Assigned Team"}),(0,n.jsx)(I.Z,{sx:{fontWeight:600},children:"Duration"}),(0,n.jsx)(I.Z,{sx:{fontWeight:600},children:"Metrics"}),(0,n.jsx)(I.Z,{sx:{fontWeight:600,textAlign:"right"},children:"Actions"})]})}),(0,n.jsx)(S.Z,{children:d?(0,n.jsx)(k.Z,{children:(0,n.jsx)(I.Z,{colSpan:7,align:"center",sx:{py:5},children:(0,n.jsx)(W.Z,{})})}):h?(0,n.jsx)(k.Z,{children:(0,n.jsx)(I.Z,{colSpan:7,align:"center",sx:{py:5},children:(0,n.jsx)(E.Z,{severity:"error",children:h})})}):a.map(e=>(0,n.jsxs)(k.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(I.Z,{component:"th",scope:"row",children:(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,n.jsx)(K.Z,{sx:{color:"primary.main"}}),(0,n.jsx)(g.Z,{variant:"body2",fontWeight:600,children:e.name})]})}),(0,n.jsx)(I.Z,{children:(0,n.jsx)(_.Z,{label:e.status,size:"small",color:ec(e.status),icon:el(e.status)})}),(0,n.jsx)(I.Z,{children:(0,n.jsx)(g.Z,{variant:"body2",color:"text.secondary",children:e.goal_name})}),(0,n.jsx)(I.Z,{sx:{whiteSpace:"nowrap"},children:(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(Q.Z,{sx:{fontSize:18,color:"text.secondary"}}),(0,n.jsx)(g.Z,{variant:"body2",children:e.team_name})]})}),(0,n.jsx)(I.Z,{sx:{whiteSpace:"nowrap"},children:(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(J,{sx:{fontSize:18,color:"text.secondary"}}),(0,n.jsxs)(g.Z,{variant:"body2",children:[ex(e.starts_at)," - ",ex(e.ends_at)]})]})}),(0,n.jsx)(I.Z,{children:(0,n.jsxs)(p.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsxs)(g.Z,{variant:"body2",fontWeight:500,children:["Conv: ",e.conversations.toLocaleString()]}),(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(g.Z,{variant:"body2",fontWeight:500,sx:{width:75},children:"Avg Score:"}),(0,n.jsx)(z.Z,{variant:"determinate",value:e.avg_score,color:ed(e.avg_score),sx:{width:50,height:6,borderRadius:3,flexGrow:1}}),(0,n.jsxs)(g.Z,{variant:"body2",fontWeight:600,color:"".concat(ed(e.avg_score),".main"),children:[e.avg_score,"%"]})]}),(0,n.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(g.Z,{variant:"body2",fontWeight:500,sx:{width:75},children:"Completion:"}),(0,n.jsx)(z.Z,{variant:"determinate",value:e.completion_rate,color:ed(e.completion_rate),sx:{width:50,height:6,borderRadius:3,flexGrow:1}}),(0,n.jsxs)(g.Z,{variant:"body2",fontWeight:600,color:"".concat(ed(e.completion_rate),".main"),children:[e.completion_rate,"%"]})]})]})}),(0,n.jsx)(I.Z,{align:"right",children:(0,n.jsx)(ee,{campaign:e,onEdit:en,onClone:er,onDelete:ei,onCopy:eo})})]},e.id))})]})})}),!d&&!h&&0===a.length&&(0,n.jsxs)(p.Z,{sx:{textAlign:"center",py:8,mt:2},children:[(0,n.jsx)(K.Z,{sx:{fontSize:80,color:"text.secondary",mb:2}}),(0,n.jsx)(g.Z,{variant:"h5",gutterBottom:!0,children:"No Campaigns Created Yet"}),(0,n.jsx)(g.Z,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first campaign to start managing conversation objectives for your teams."}),(0,n.jsx)(j.Z,{variant:"contained",startIcon:(0,n.jsx)(q.Z,{}),onClick:ea,size:"large",children:"Create Your First Campaign"})]})]}),(0,n.jsxs)(D.Z,{open:N,onClose:()=>A(!1),maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(M.Z,{children:"Delete Campaign"}),(0,n.jsxs)(O.Z,{children:[(0,n.jsxs)(g.Z,{children:['Are you sure you want to delete the campaign "',null==P?void 0:P.name,'"? This action cannot be undone.']}),(0,n.jsxs)(E.Z,{severity:"warning",sx:{mt:2},children:[(0,n.jsx)(F.Z,{children:"Warning"}),"Deleting this campaign will remove all associated data and historical records."]})]}),(0,n.jsxs)(T.Z,{children:[(0,n.jsx)(j.Z,{onClick:()=>A(!1),children:"Cancel"}),(0,n.jsx)(j.Z,{onClick:es,color:"error",variant:"contained",children:"Delete Campaign"})]})]})]})]})}},6159:function(e,t,a){"use strict";a.d(t,{E6:function(){return r},QF:function(){return i},bO:function(){return o},hm:function(){return c},mK:function(){return s}});var n=a(4633);let r=async function(){let{skip:e=0,limit:t=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await n.Z.get("/api/v1/campaigns/",{params:{skip:e,limit:t}})).data}catch(e){throw console.error("Failed to fetch campaigns:",e),Error("Could not fetch campaigns.")}},o=async e=>{try{await n.Z.delete("/api/v1/campaigns/".concat(e))}catch(t){throw console.error("Failed to delete campaign ".concat(e,":"),t),Error("Could not delete the campaign.")}},i=async e=>{try{return(await n.Z.get("/api/v1/campaigns/".concat(e))).data}catch(t){throw console.error("Failed to fetch campaign ".concat(e,":"),t),Error("Could not fetch campaign details.")}},s=async e=>{try{return(await n.Z.post("/api/v1/campaigns/",e)).data}catch(e){throw console.error("Failed to create campaign:",e),Error("Could not create campaign.")}},c=async(e,t)=>{try{return(await n.Z.put("/api/v1/campaigns/".concat(e),t)).data}catch(t){throw console.error("Failed to update campaign ".concat(e,":"),t),Error("Could not update campaign.")}}},5280:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var n=a(2265),r=a(1994),o=a(7609),i=a(5194),s=a(1589),c=a(1190),l=a(4153),d=a(4305),x=a(8664),h=a(6373),p=a(3608),m=a(3405),u=a(8405),g=a(1271),Z=a(5245),j=a(1475);function f(e){return(0,j.ZP)("MuiMenuItem",e)}let y=(0,Z.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var v=a(7437);let b=e=>{let{disabled:t,dense:a,divider:n,disableGutters:r,selected:i,classes:s}=e,c=(0,o.Z)({root:["root",a&&"dense",t&&"disabled",!r&&"gutters",n&&"divider",i&&"selected"]},f,s);return{...s,...c}},C=(0,s.ZP)(x.Z,{shouldForwardProp:e=>(0,i.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,c.Z)(e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(y.selected)]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),["&.".concat(y.focusVisible)]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,"".concat((t.vars||t).palette.action.selectedOpacity," + ").concat((t.vars||t).palette.action.focusOpacity))}},["&.".concat(y.selected,":hover")]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,"".concat((t.vars||t).palette.action.selectedOpacity," + ").concat((t.vars||t).palette.action.hoverOpacity)),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},["&.".concat(y.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(y.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(m.Z.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(m.Z.inset)]:{marginLeft:52},["& .".concat(g.Z.root)]:{marginTop:0,marginBottom:0},["& .".concat(g.Z.inset)]:{paddingLeft:36},["& .".concat(u.Z.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,["& .".concat(u.Z.root," svg")]:{fontSize:"1.25rem"}}}]}}));var w=n.forwardRef(function(e,t){let a;let o=(0,l.i)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:c=!1,divider:x=!1,disableGutters:m=!1,focusVisibleClassName:u,role:g="menuitem",tabIndex:Z,className:j,...f}=o,y=n.useContext(d.Z),w=n.useMemo(()=>({dense:c||y.dense||!1,disableGutters:m}),[y.dense,c,m]),k=n.useRef(null);(0,h.Z)(()=>{i&&k.current&&k.current.focus()},[i]);let I={...o,dense:w.dense,divider:x,disableGutters:m},S=b(o),W=(0,p.Z)(k,t);return o.disabled||(a=void 0!==Z?Z:-1),(0,v.jsx)(d.Z.Provider,{value:w,children:(0,v.jsx)(C,{ref:W,role:g,tabIndex:a,component:s,focusVisibleClassName:(0,r.Z)(S.focusVisible,u),className:(0,r.Z)(S.root,j),...f,ownerState:I,classes:S})})})}},function(e){e.O(0,[334,103,118,41,4,865,635,21,971,117,744],function(){return e(e.s=3563)}),_N_E=e.O()}]);