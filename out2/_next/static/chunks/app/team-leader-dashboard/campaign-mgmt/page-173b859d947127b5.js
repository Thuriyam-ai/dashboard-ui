(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{4258:function(e,t,n){Promise.resolve().then(n.bind(n,750))},750:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ee}});var a=n(7437),r=n(2265),i=n(9376),s=n(4753),o=n(3397),c=n(5545),l=n(8661),d=n(5280),x=n(7824),h=n(5263),m=n(8543),j=n(9083),Z=n(5666),g=n(658),p=n(2854),u=n(7639),f=n(1504),y=n(1563),v=n(2995),C=n(8654),b=n(8045),w=n(6838),I=n(6116),S=n(6382),W=n(6875),_=n(8319),z=n(5338),E=n(793),k=n(1096),N=n(4247),A=n(3985),F=n(6825),O=n(7893),D=n(5386),T=n(9391),G=n(3484),P=n(8841),R=n(599),V=n(196),L=n(7367),B=n(2961),J=n(9010),M=n(2141),U=n(2192),X=n(9470),H=n(9755),q=n(1381),Q=(0,n(6508).Z)((0,a.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),Y=n(4881),K=n(6159);let $=e=>{let{campaign:t,onEdit:n,onClone:i,onDelete:s}=e,[o,m]=(0,r.useState)(null),j=()=>m(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{"aria-label":"actions",onClick:e=>m(e.currentTarget),children:(0,a.jsx)(T.Z,{})}),(0,a.jsxs)(l.Z,{anchorEl:o,open:!!o,onClose:j,children:[(0,a.jsxs)(d.Z,{onClick:()=>{n(t.id),j()},children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(G.Z,{fontSize:"small"})}),(0,a.jsx)(h.Z,{children:"Edit"})]}),(0,a.jsxs)(d.Z,{onClick:()=>{i(t.id),j()},children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(P.Z,{fontSize:"small"})}),(0,a.jsx)(h.Z,{children:"Clone"})]}),(0,a.jsxs)(d.Z,{onClick:()=>{s(t),j()},sx:{color:"error.main"},children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(R.Z,{fontSize:"small",color:"error"})}),(0,a.jsx)(h.Z,{children:"Delete"})]})]})]})};function ee(){let e=(0,i.useRouter)(),{logout:t}=(0,Y.a)(),[n,l]=(0,r.useState)([]),[d,x]=(0,r.useState)(!0),[h,G]=(0,r.useState)(null),[P,R]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{x(!0);let e=await (0,K.E6)();l(e)}catch(e){G("Failed to load campaigns. Please try again later.")}finally{x(!1)}})()},[]);let en=()=>e.push("/team-leader-dashboard/campaign-mgmt/editor"),ea=t=>e.push("/team-leader-dashboard/campaign-mgmt/editor?id=".concat(t)),er=t=>e.push("/team-leader-dashboard/campaign-mgmt/editor?clone=".concat(t)),ei=e=>{et(e),R(!0)},es=async()=>{if(ee)try{await (0,K.bO)(ee.id),l(e=>e.filter(e=>e.id!==ee.id)),R(!1),et(null)}catch(e){console.error("Failed to delete campaign",e)}},eo=e=>{switch(e){case"ACTIVE":return"success";case"UPCOMING":return"info";default:return"default"}},ec=e=>{switch(e){case"ACTIVE":return(0,a.jsx)(V.Z,{});case"UPCOMING":return(0,a.jsx)(L.Z,{});case"COMPLETED":return(0,a.jsx)(B.Z,{});default:return(0,a.jsx)(J.Z,{})}},el=e=>e>=90?"success":e>=70?"warning":"error",ed=e=>e?new Date(e).toLocaleDateString("en-CA"):"";return(0,a.jsxs)(m.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,a.jsx)(s.q,{activeItem:"campaign-mgmt"}),(0,a.jsxs)(m.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",marginLeft:"280px"},children:[(0,a.jsx)(j.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:"1px solid",borderColor:"divider"},children:(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(m.Z,{sx:{flexGrow:1},children:(0,a.jsx)(g.Z,{variant:"body2",sx:{fontFamily:"monospace",color:"text.secondary"},children:"team-leader-dashboard.localhost:3000"})}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,a.jsx)(c.Z,{size:"small",sx:{color:"text.secondary"},children:(0,a.jsx)(M.Z,{})}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[(0,a.jsx)(p.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},children:"W"}),(0,a.jsx)(g.Z,{variant:"body2",fontWeight:500,children:"Work"})]}),(0,a.jsx)(c.Z,{size:"small",sx:{color:"text.secondary"},children:(0,a.jsx)(T.Z,{})}),(0,a.jsx)(u.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,a.jsx)(U.Z,{}),sx:{ml:1},onClick:t,children:"Logout"})]})]})}),(0,a.jsxs)(f.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,a.jsx)(o.O,{}),(0,a.jsx)(m.Z,{sx:{mb:4},children:(0,a.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(g.Z,{variant:"h3",component:"h1",fontWeight:700,gutterBottom:!0,children:"Campaign Management"}),(0,a.jsx)(g.Z,{variant:"h6",color:"text.secondary",children:"Create and manage conversation campaigns for your teams"})]}),(0,a.jsx)(u.Z,{variant:"contained",startIcon:(0,a.jsx)(X.Z,{}),onClick:en,sx:{px:3,py:1.5,fontSize:"1rem",fontWeight:600},children:"Create New Campaign"})]})}),(0,a.jsx)(y.Z,{children:(0,a.jsx)(v.Z,{component:C.Z,variant:"outlined",children:(0,a.jsxs)(b.Z,{sx:{minWidth:650},"aria-label":"campaigns table",children:[(0,a.jsx)(w.Z,{children:(0,a.jsxs)(I.Z,{sx:{backgroundColor:"action.hover"},children:[(0,a.jsx)(S.Z,{sx:{fontWeight:600,width:"25%"},children:"Campaign Name"}),(0,a.jsx)(S.Z,{sx:{fontWeight:600},children:"Status"}),(0,a.jsx)(S.Z,{sx:{fontWeight:600,width:"20%"},children:"Goal Version"}),(0,a.jsx)(S.Z,{sx:{fontWeight:600},children:"Assigned Team"}),(0,a.jsx)(S.Z,{sx:{fontWeight:600},children:"Duration"}),(0,a.jsx)(S.Z,{sx:{fontWeight:600},children:"Metrics"}),(0,a.jsx)(S.Z,{sx:{fontWeight:600,textAlign:"right"},children:"Actions"})]})}),(0,a.jsx)(W.Z,{children:d?(0,a.jsx)(I.Z,{children:(0,a.jsx)(S.Z,{colSpan:7,align:"center",sx:{py:5},children:(0,a.jsx)(_.Z,{})})}):h?(0,a.jsx)(I.Z,{children:(0,a.jsx)(S.Z,{colSpan:7,align:"center",sx:{py:5},children:(0,a.jsx)(z.Z,{severity:"error",children:h})})}):n.map(e=>(0,a.jsxs)(I.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,a.jsx)(S.Z,{component:"th",scope:"row",children:(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,a.jsx)(H.Z,{sx:{color:"primary.main"}}),(0,a.jsx)(g.Z,{variant:"body2",fontWeight:600,children:e.name})]})}),(0,a.jsx)(S.Z,{children:(0,a.jsx)(E.Z,{label:e.status,size:"small",color:eo(e.status),icon:ec(e.status)})}),(0,a.jsx)(S.Z,{children:(0,a.jsx)(g.Z,{variant:"body2",color:"text.secondary",children:e.goal_name})}),(0,a.jsx)(S.Z,{sx:{whiteSpace:"nowrap"},children:(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(q.Z,{sx:{fontSize:18,color:"text.secondary"}}),(0,a.jsx)(g.Z,{variant:"body2",children:e.team_name})]})}),(0,a.jsx)(S.Z,{sx:{whiteSpace:"nowrap"},children:(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(Q,{sx:{fontSize:18,color:"text.secondary"}}),(0,a.jsxs)(g.Z,{variant:"body2",children:[ed(e.starts_at)," - ",ed(e.ends_at)]})]})}),(0,a.jsx)(S.Z,{children:(0,a.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,a.jsxs)(g.Z,{variant:"body2",fontWeight:500,children:["Conv: ",e.conversations.toLocaleString()]}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(g.Z,{variant:"body2",fontWeight:500,sx:{width:75},children:"Avg Score:"}),(0,a.jsx)(k.Z,{variant:"determinate",value:e.avg_score,color:el(e.avg_score),sx:{width:50,height:6,borderRadius:3,flexGrow:1}}),(0,a.jsxs)(g.Z,{variant:"body2",fontWeight:600,color:"".concat(el(e.avg_score),".main"),children:[e.avg_score,"%"]})]}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(g.Z,{variant:"body2",fontWeight:500,sx:{width:75},children:"Completion:"}),(0,a.jsx)(k.Z,{variant:"determinate",value:e.completion_rate,color:el(e.completion_rate),sx:{width:50,height:6,borderRadius:3,flexGrow:1}}),(0,a.jsxs)(g.Z,{variant:"body2",fontWeight:600,color:"".concat(el(e.completion_rate),".main"),children:[e.completion_rate,"%"]})]})]})}),(0,a.jsx)(S.Z,{align:"right",children:(0,a.jsx)($,{campaign:e,onEdit:ea,onClone:er,onDelete:ei})})]},e.id))})]})})}),!d&&!h&&0===n.length&&(0,a.jsxs)(m.Z,{sx:{textAlign:"center",py:8,mt:2},children:[(0,a.jsx)(H.Z,{sx:{fontSize:80,color:"text.secondary",mb:2}}),(0,a.jsx)(g.Z,{variant:"h5",gutterBottom:!0,children:"No Campaigns Created Yet"}),(0,a.jsx)(g.Z,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first campaign to start managing conversation objectives for your teams."}),(0,a.jsx)(u.Z,{variant:"contained",startIcon:(0,a.jsx)(X.Z,{}),onClick:en,size:"large",children:"Create Your First Campaign"})]})]}),(0,a.jsxs)(N.Z,{open:P,onClose:()=>R(!1),maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(A.Z,{children:"Delete Campaign"}),(0,a.jsxs)(F.Z,{children:[(0,a.jsxs)(g.Z,{children:['Are you sure you want to delete the campaign "',null==ee?void 0:ee.name,'"? This action cannot be undone.']}),(0,a.jsxs)(z.Z,{severity:"warning",sx:{mt:2},children:[(0,a.jsx)(O.Z,{children:"Warning"}),"Deleting this campaign will remove all associated data and historical records."]})]}),(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(u.Z,{onClick:()=>R(!1),children:"Cancel"}),(0,a.jsx)(u.Z,{onClick:es,color:"error",variant:"contained",children:"Delete Campaign"})]})]})]})]})}},4633:function(e,t,n){"use strict";var a=n(3464);let r=n(257).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000",i=a.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0dXNlciIsInNjb3BlcyI6WyJtZSIsInVzZXJzIiwiYWRtaW4iXSwiZXhwIjoxNzU4ODcyNzExfQ.R_90bqCS7yw9qjFS0jzx1FcSca1POM8dQ2ATSmHOR_0";return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=i},6159:function(e,t,n){"use strict";n.d(t,{E6:function(){return r},QF:function(){return s},bO:function(){return i},hm:function(){return c},mK:function(){return o}});var a=n(4633);let r=async function(){let{skip:e=0,limit:t=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await a.Z.get("/api/v1/campaigns/",{params:{skip:e,limit:t}})).data}catch(e){throw console.error("Failed to fetch campaigns:",e),Error("Could not fetch campaigns.")}},i=async e=>{try{await a.Z.delete("/api/v1/campaigns/".concat(e))}catch(t){throw console.error("Failed to delete campaign ".concat(e,":"),t),Error("Could not delete the campaign.")}},s=async e=>{try{return(await a.Z.get("/api/v1/campaigns/".concat(e))).data}catch(t){throw console.error("Failed to fetch campaign ".concat(e,":"),t),Error("Could not fetch campaign details.")}},o=async e=>{try{return(await a.Z.post("/api/v1/campaigns/",e)).data}catch(e){throw console.error("Failed to create campaign:",e),Error("Could not create campaign.")}},c=async(e,t)=>{try{return(await a.Z.put("/api/v1/campaigns/".concat(e),t)).data}catch(t){throw console.error("Failed to update campaign ".concat(e,":"),t),Error("Could not update campaign.")}}}},function(e){e.O(0,[152,56,855,421,304,4,611,135,96,2,971,117,744],function(){return e(e.s=4258)}),_N_E=e.O()}]);