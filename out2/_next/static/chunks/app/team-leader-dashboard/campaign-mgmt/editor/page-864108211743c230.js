(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{9935:function(e,t,a){Promise.resolve().then(a.bind(a,2899))},2899:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var r=a(7437),i=a(2265),n=a(9376),l=a(4753),o=a(3397),s=a(8543),c=a(8319),d=a(9083),h=a(5666),p=a(5545),u=a(658),g=a(7639),m=a(1504),x=a(5338),v=a(1563),f=a(1002),Z=a(9352),y=a(9882),j=a(2347),b=a(6425),w=a(9318),S=a(5280),C=a(7554),_=a(7893),k=a(1442),I=a(1617),L=a(2517),A=a(1381),D=a(6159),W=a(1637),E=a(1273);let F=e=>e?e.split("T")[0]:"";function P(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[a,P]=(0,i.useState)(!1),[T,B]=(0,i.useState)(null),[G,M]=(0,i.useState)("Create New Campaign"),[N,R]=(0,i.useState)(!0),[V,z]=(0,i.useState)(!1),[q,O]=(0,i.useState)(null),[H,Q]=(0,i.useState)(""),[U,K]=(0,i.useState)(""),[J,X]=(0,i.useState)(""),[Y,$]=(0,i.useState)(""),[ee,et]=(0,i.useState)(""),[ea,er]=(0,i.useState)([]),[ei,en]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=t.get("id"),a=t.get("clone");(async()=>{try{let[t,r]=await Promise.all([(0,W.FV)(),(0,E.q)()]);er(t),en(r),e?(P(!0),B(e),M("Edit Campaign"),await el(e)):a?(P(!1),B(null),M("Create New Campaign (Cloned)"),await el(a)):(P(!1),B(null))}catch(e){O("Failed to load necessary data. Please try again."),console.error(e)}finally{R(!1)}})()},[t]);let el=async e=>{let t=await (0,D.QF)(e);Q(t.name),K(F(t.starts_at)),X(F(t.ends_at)),$(t.goal_id),et(t.team_id)},eo=()=>e.push("/team-leader-dashboard/campaign-mgmt"),es=async()=>{z(!0),O(null);let e=U?new Date(U).toISOString():null,t=J?new Date(J).toISOString():null;try{a&&T?await (0,D.hm)(T,{name:H,team_id:ee,starts_at:e,ends_at:t,business_objective:"TBD",status:"UPCOMING"}):await (0,D.mK)({name:H,goal_id:Y,team_id:ee,starts_at:e,ends_at:t,business_objective:"TBD",status:"UPCOMING",organization_id:"org-1"}),eo()}catch(e){O("Failed to save the campaign. Please check the fields and try again."),console.error(e)}finally{z(!1)}},ec=ea.find(e=>e.goal_name===Y);return(ei.find(e=>e.id===ee),N)?(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(c.Z,{})}):(0,r.jsxs)(s.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,r.jsx)(l.q,{activeItem:"campaign-mgmt"}),(0,r.jsxs)(s.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",marginLeft:"280px"},children:[(0,r.jsx)(d.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:"1px solid",borderColor:"divider"},children:(0,r.jsxs)(h.Z,{children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexGrow:1},children:[(0,r.jsx)(p.Z,{onClick:eo,children:(0,r.jsx)(k.Z,{})}),(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(u.Z,{variant:"h6",fontWeight:600,children:G}),(0,r.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:H||"Untitled Campaign"})]})]}),(0,r.jsx)(g.Z,{variant:"contained",startIcon:V?(0,r.jsx)(c.Z,{size:20,color:"inherit"}):(0,r.jsx)(I.Z,{}),onClick:es,disabled:V,sx:{ml:2},children:V?"Saving...":"Save Campaign"})]})}),(0,r.jsxs)(m.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,r.jsx)(o.O,{}),q&&(0,r.jsx)(x.Z,{severity:"error",sx:{mb:2},children:q}),(0,r.jsx)(v.Z,{children:(0,r.jsxs)(f.Z,{sx:{p:4},children:[(0,r.jsx)(u.Z,{variant:"h5",fontWeight:600,gutterBottom:!0,children:"Campaign Configuration"}),(0,r.jsxs)(Z.Z,{container:!0,spacing:3,sx:{mt:1},children:[(0,r.jsxs)(Z.Z,{item:!0,xs:12,md:6,children:[(0,r.jsx)(y.Z,{fullWidth:!0,label:"Campaign Name",value:H,onChange:e=>Q(e.target.value),placeholder:"e.g., Q1 Loan Qualification Drive",sx:{mb:3},helperText:"A unique, human-readable name for this campaign",required:!0}),(0,r.jsxs)(s.Z,{sx:{mb:3},children:[(0,r.jsx)(u.Z,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"Campaign Duration"}),(0,r.jsxs)(Z.Z,{container:!0,spacing:2,children:[(0,r.jsx)(Z.Z,{item:!0,xs:6,children:(0,r.jsx)(y.Z,{label:"Start Date",type:"date",value:U,onChange:e=>K(e.target.value),InputLabelProps:{shrink:!0},fullWidth:!0})}),(0,r.jsx)(Z.Z,{item:!0,xs:6,children:(0,r.jsx)(y.Z,{label:"End Date",type:"date",value:J,onChange:e=>X(e.target.value),InputLabelProps:{shrink:!0},fullWidth:!0})})]})]})]}),(0,r.jsxs)(Z.Z,{item:!0,xs:12,md:6,children:[(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:3},required:!0,children:[(0,r.jsx)(b.Z,{children:"Goal Selection"}),(0,r.jsx)(w.Z,{value:Y,onChange:e=>$(e.target.value),label:"Goal Selection",disabled:a,children:ea.map(e=>(0,r.jsx)(S.Z,{value:e.goal_id,children:(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(L.Z,{sx:{fontSize:16}}),(0,r.jsxs)(u.Z,{variant:"body2",children:[e.goal_name," (v",e.active_version_no,")"]})]})},e.goal_name))})]}),(0,r.jsxs)(j.Z,{fullWidth:!0,sx:{mb:3},required:!0,children:[(0,r.jsx)(b.Z,{children:"Team Assignment"}),(0,r.jsx)(w.Z,{value:ee,onChange:e=>et(e.target.value),label:"Team Assignment",children:ei.map(e=>(0,r.jsx)(S.Z,{value:e.id,children:(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,r.jsx)(A.Z,{sx:{fontSize:16}}),(0,r.jsx)(u.Z,{variant:"body2",children:e.name})]})},e.id))})]})]})]}),ec&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{sx:{my:3}}),(0,r.jsx)(u.Z,{variant:"h6",gutterBottom:!0,children:"Selected Goal Information"}),(0,r.jsxs)(x.Z,{severity:"info",sx:{mb:3},children:[(0,r.jsxs)(_.Z,{children:["Goal Details: ",ec.goal_name]}),"This goal will serve as the playbook for this campaign. All conversations will follow the interaction blueprint and quality parameters defined in this goal version."]})]})]})})]})]})]})}function T(){return(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,r.jsx)(c.Z,{})}),children:(0,r.jsx)(P,{})})}},6159:function(e,t,a){"use strict";a.d(t,{E6:function(){return i},QF:function(){return l},bO:function(){return n},hm:function(){return s},mK:function(){return o}});var r=a(4633);let i=async function(){let{skip:e=0,limit:t=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await r.Z.get("/api/v1/campaigns/",{params:{skip:e,limit:t}})).data}catch(e){throw console.error("Failed to fetch campaigns:",e),Error("Could not fetch campaigns.")}},n=async e=>{try{await r.Z.delete("/api/v1/campaigns/".concat(e))}catch(t){throw console.error("Failed to delete campaign ".concat(e,":"),t),Error("Could not delete the campaign.")}},l=async e=>{try{return(await r.Z.get("/api/v1/campaigns/".concat(e))).data}catch(t){throw console.error("Failed to fetch campaign ".concat(e,":"),t),Error("Could not fetch campaign details.")}},o=async e=>{try{return(await r.Z.post("/api/v1/campaigns/",e)).data}catch(e){throw console.error("Failed to create campaign:",e),Error("Could not create campaign.")}},s=async(e,t)=>{try{return(await r.Z.put("/api/v1/campaigns/".concat(e),t)).data}catch(t){throw console.error("Failed to update campaign ".concat(e,":"),t),Error("Could not update campaign.")}}},1273:function(e,t,a){"use strict";a.d(t,{q:function(){return i}});var r=a(4633);let i=async()=>{try{return(await r.Z.get("/api/v1/goals/utils/teams")).data}catch(e){throw console.error("Failed to fetch teams:",e),Error("Could not fetch teams.")}}},1442:function(e,t,a){"use strict";var r=a(6508),i=a(7437);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},1381:function(e,t,a){"use strict";var r=a(6508),i=a(7437);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group")},2517:function(e,t,a){"use strict";var r=a(6508),i=a(7437);t.Z=(0,r.Z)([(0,i.jsx)("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),(0,i.jsx)("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology")},1617:function(e,t,a){"use strict";var r=a(6508),i=a(7437);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},7554:function(e,t,a){"use strict";var r=a(2265),i=a(1994),n=a(7609),l=a(1589),o=a(1190),s=a(4153),c=a(3405),d=a(7437);let h=e=>{let{absolute:t,children:a,classes:r,flexItem:i,light:l,orientation:o,textAlign:s,variant:d}=e;return(0,n.Z)({root:["root",t&&"absolute",d,l&&"light","vertical"===o&&"vertical",i&&"flexItem",a&&"withChildren",a&&"vertical"===o&&"withChildrenVertical","right"===s&&"vertical"!==o&&"textAlignRight","left"===s&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]},c.V,r)},p=(0,l.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.absolute&&t.absolute,t[a.variant],a.light&&t.light,"vertical"===a.orientation&&t.vertical,a.flexItem&&t.flexItem,a.children&&t.withChildren,a.children&&"vertical"===a.orientation&&t.withChildrenVertical,"right"===a.textAlign&&"vertical"!==a.orientation&&t.textAlignRight,"left"===a.textAlign&&"vertical"!==a.orientation&&t.textAlignLeft]}})((0,o.Z)(e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:"thin solid ".concat((t.vars||t).palette.divider),borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}})),u=(0,l.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.wrapper,"vertical"===a.orientation&&t.wrapperVertical]}})((0,o.Z)(e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)"),whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")}}]}})),g=r.forwardRef(function(e,t){let a=(0,s.i)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:n,className:l,orientation:o="horizontal",component:c=n||"vertical"===o?"div":"hr",flexItem:g=!1,light:m=!1,role:x="hr"!==c?"separator":void 0,textAlign:v="center",variant:f="fullWidth",...Z}=a,y={...a,absolute:r,component:c,flexItem:g,light:m,orientation:o,role:x,textAlign:v,variant:f},j=h(y);return(0,d.jsx)(p,{as:c,className:(0,i.Z)(j.root,l),role:x,ref:t,ownerState:y,"aria-orientation":"separator"===x&&("hr"!==c||"vertical"===o)?o:void 0,...Z,children:n?(0,d.jsx)(u,{className:j.wrapper,ownerState:y,children:n}):null})});g&&(g.muiSkipListHighlight=!0),t.Z=g}},function(e){e.O(0,[152,56,855,668,421,882,611,618,971,117,744],function(){return e(e.s=9935)}),_N_E=e.O()}]);