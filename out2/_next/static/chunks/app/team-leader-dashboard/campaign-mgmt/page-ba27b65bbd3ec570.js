(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{3563:function(e,n,t){Promise.resolve().then(t.bind(t,750))},750:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return en}});var a=t(7437),r=t(2265),i=t(9376),s=t(4753),o=t(3397),c=t(5545),l=t(8156),d=t(5280),x=t(7824),h=t(5263),m=t(8543),g=t(9083),j=t(5666),Z=t(658),p=t(2854),u=t(7639),f=t(1504),y=t(1563),v=t(2995),C=t(8654),b=t(8045),w=t(6838),S=t(6116),W=t(6382),k=t(6875),I=t(8319),E=t(5338),_=t(793),z=t(1096),D=t(4247),F=t(3985),A=t(6825),G=t(7893),N=t(5386),O=t(9391),T=t(3484),M=t(8841),V=t(3274),H=t(599),L=t(196),P=t(7367),B=t(2961),R=t(9010),U=t(2141),Y=t(2192),q=t(9470),K=t(9755),Q=t(1381),J=(0,t(6508).Z)((0,a.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),X=t(4881),$=t(6159);let ee=e=>{let{campaign:n,onEdit:t,onClone:i,onDelete:s,onCopy:o}=e,[m,g]=(0,r.useState)(null),j=()=>g(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{"aria-label":"actions",onClick:e=>g(e.currentTarget),children:(0,a.jsx)(O.Z,{})}),(0,a.jsxs)(l.Z,{anchorEl:m,open:!!m,onClose:j,children:[(0,a.jsxs)(d.Z,{onClick:()=>{t(n.id),j()},children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(T.Z,{fontSize:"small"})}),(0,a.jsx)(h.Z,{children:"Edit"})]}),(0,a.jsxs)(d.Z,{onClick:()=>{i(n.id),j()},children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(M.Z,{fontSize:"small"})}),(0,a.jsx)(h.Z,{children:"Clone"})]}),(0,a.jsxs)(d.Z,{onClick:()=>{o(n.id),j()},children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(V.Z,{fontSize:"small"})}),(0,a.jsx)(h.Z,{children:"Copy ID"})]}),(0,a.jsxs)(d.Z,{onClick:()=>{s(n),j()},sx:{color:"error.main"},children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(H.Z,{fontSize:"small",color:"error"})}),(0,a.jsx)(h.Z,{children:"Delete"})]})]})]})};function en(){let e=(0,i.useRouter)(),{logout:n}=(0,X.a)(),[t,l]=(0,r.useState)([]),[d,x]=(0,r.useState)(!0),[h,T]=(0,r.useState)(null),[M,V]=(0,r.useState)(!1),[H,en]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{x(!0);let e=await (0,$.E6)();l(e)}catch(e){T("Failed to load campaigns. Please try again later.")}finally{x(!1)}})()},[]);let et=()=>e.push("/team-leader-dashboard/campaign-mgmt/editor"),ea=n=>e.push("/team-leader-dashboard/campaign-mgmt/editor?id=".concat(n)),er=n=>e.push("/team-leader-dashboard/campaign-mgmt/editor?clone=".concat(n)),ei=e=>{navigator.clipboard.writeText(e).then(()=>{alert("Campaign ID copied to clipboard: ".concat(e))}).catch(e=>{console.error("Failed to copy campaign ID: ",e),alert("Could not copy ID.")})},es=e=>{en(e),V(!0)},eo=async()=>{if(H)try{await (0,$.bO)(H.id),l(e=>e.filter(e=>e.id!==H.id)),V(!1),en(null)}catch(e){console.error("Failed to delete campaign",e)}},ec=e=>{switch(e){case"ACTIVE":return"success";case"UPCOMING":return"info";default:return"default"}},el=e=>{switch(e){case"ACTIVE":return(0,a.jsx)(L.Z,{});case"UPCOMING":return(0,a.jsx)(P.Z,{});case"COMPLETED":return(0,a.jsx)(B.Z,{});default:return(0,a.jsx)(R.Z,{})}},ed=e=>e>=90?"success":e>=70?"warning":"error",ex=e=>e?new Date(e).toLocaleDateString("en-CA"):"â€“";return(0,a.jsxs)(m.Z,{sx:{display:"flex",minHeight:"100vh",backgroundColor:"background.default"},children:[(0,a.jsx)(s.q,{activeItem:"campaign-mgmt"}),(0,a.jsxs)(m.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",marginLeft:"280px"},children:[(0,a.jsx)(g.Z,{position:"static",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:"1px solid",borderColor:"divider"},children:(0,a.jsxs)(j.Z,{children:[(0,a.jsx)(m.Z,{sx:{flexGrow:1},children:(0,a.jsx)(Z.Z,{variant:"body2",sx:{fontFamily:"monospace",color:"text.secondary"},children:"team-leader-dashboard.localhost:3000"})}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,a.jsx)(c.Z,{size:"small",sx:{color:"text.secondary"},children:(0,a.jsx)(U.Z,{})}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[(0,a.jsx)(p.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},children:"W"}),(0,a.jsx)(Z.Z,{variant:"body2",fontWeight:500,children:"Work"})]}),(0,a.jsx)(c.Z,{size:"small",sx:{color:"text.secondary"},children:(0,a.jsx)(O.Z,{})}),(0,a.jsx)(u.Z,{variant:"contained",color:"error",size:"small",startIcon:(0,a.jsx)(Y.Z,{}),sx:{ml:1},onClick:n,children:"Logout"})]})]})}),(0,a.jsxs)(f.Z,{maxWidth:"xl",sx:{flexGrow:1,py:3},children:[(0,a.jsx)(o.O,{}),(0,a.jsx)(m.Z,{sx:{mb:4},children:(0,a.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(Z.Z,{variant:"h3",component:"h1",fontWeight:700,gutterBottom:!0,children:"Campaign Management"}),(0,a.jsx)(Z.Z,{variant:"h6",color:"text.secondary",children:"Create and manage conversation campaigns for your teams"})]}),(0,a.jsx)(u.Z,{variant:"contained",startIcon:(0,a.jsx)(q.Z,{}),onClick:et,sx:{px:3,py:1.5,fontSize:"1rem",fontWeight:600},children:"Create New Campaign"})]})}),(0,a.jsx)(y.Z,{children:(0,a.jsx)(v.Z,{component:C.Z,variant:"outlined",children:(0,a.jsxs)(b.Z,{sx:{minWidth:650},"aria-label":"campaigns table",children:[(0,a.jsx)(w.Z,{children:(0,a.jsxs)(S.Z,{sx:{backgroundColor:"action.hover"},children:[(0,a.jsx)(W.Z,{sx:{fontWeight:600,width:"25%"},children:"Campaign Name"}),(0,a.jsx)(W.Z,{sx:{fontWeight:600},children:"Status"}),(0,a.jsx)(W.Z,{sx:{fontWeight:600,width:"20%"},children:"Goal"}),(0,a.jsx)(W.Z,{sx:{fontWeight:600},children:"Assigned Team"}),(0,a.jsx)(W.Z,{sx:{fontWeight:600},children:"Duration"}),(0,a.jsx)(W.Z,{sx:{fontWeight:600},children:"Metrics"}),(0,a.jsx)(W.Z,{sx:{fontWeight:600,textAlign:"right"},children:"Actions"})]})}),(0,a.jsx)(k.Z,{children:d?(0,a.jsx)(S.Z,{children:(0,a.jsx)(W.Z,{colSpan:7,align:"center",sx:{py:5},children:(0,a.jsx)(I.Z,{})})}):h?(0,a.jsx)(S.Z,{children:(0,a.jsx)(W.Z,{colSpan:7,align:"center",sx:{py:5},children:(0,a.jsx)(E.Z,{severity:"error",children:h})})}):t.map(e=>(0,a.jsxs)(S.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,a.jsx)(W.Z,{component:"th",scope:"row",children:(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,a.jsx)(K.Z,{sx:{color:"primary.main"}}),(0,a.jsx)(Z.Z,{variant:"body2",fontWeight:600,children:e.name})]})}),(0,a.jsx)(W.Z,{children:(0,a.jsx)(_.Z,{label:e.status,size:"small",color:ec(e.status),icon:el(e.status)})}),(0,a.jsx)(W.Z,{children:(0,a.jsx)(Z.Z,{variant:"body2",color:"text.secondary",children:e.goal_name})}),(0,a.jsx)(W.Z,{sx:{whiteSpace:"nowrap"},children:(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(Q.Z,{sx:{fontSize:18,color:"text.secondary"}}),(0,a.jsx)(Z.Z,{variant:"body2",children:e.team_name})]})}),(0,a.jsx)(W.Z,{sx:{whiteSpace:"nowrap"},children:(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(J,{sx:{fontSize:18,color:"text.secondary"}}),(0,a.jsxs)(Z.Z,{variant:"body2",children:[ex(e.starts_at)," - ",ex(e.ends_at)]})]})}),(0,a.jsx)(W.Z,{children:(0,a.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,a.jsxs)(Z.Z,{variant:"body2",fontWeight:500,children:["Conv: ",e.conversations.toLocaleString()]}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(Z.Z,{variant:"body2",fontWeight:500,sx:{width:75},children:"Avg Score:"}),(0,a.jsx)(z.Z,{variant:"determinate",value:e.avg_score,color:ed(e.avg_score),sx:{width:50,height:6,borderRadius:3,flexGrow:1}}),(0,a.jsxs)(Z.Z,{variant:"body2",fontWeight:600,color:"".concat(ed(e.avg_score),".main"),children:[e.avg_score,"%"]})]}),(0,a.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,a.jsx)(Z.Z,{variant:"body2",fontWeight:500,sx:{width:75},children:"Completion:"}),(0,a.jsx)(z.Z,{variant:"determinate",value:e.completion_rate,color:ed(e.completion_rate),sx:{width:50,height:6,borderRadius:3,flexGrow:1}}),(0,a.jsxs)(Z.Z,{variant:"body2",fontWeight:600,color:"".concat(ed(e.completion_rate),".main"),children:[e.completion_rate,"%"]})]})]})}),(0,a.jsx)(W.Z,{align:"right",children:(0,a.jsx)(ee,{campaign:e,onEdit:ea,onClone:er,onDelete:es,onCopy:ei})})]},e.id))})]})})}),!d&&!h&&0===t.length&&(0,a.jsxs)(m.Z,{sx:{textAlign:"center",py:8,mt:2},children:[(0,a.jsx)(K.Z,{sx:{fontSize:80,color:"text.secondary",mb:2}}),(0,a.jsx)(Z.Z,{variant:"h5",gutterBottom:!0,children:"No Campaigns Created Yet"}),(0,a.jsx)(Z.Z,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Create your first campaign to start managing conversation objectives for your teams."}),(0,a.jsx)(u.Z,{variant:"contained",startIcon:(0,a.jsx)(q.Z,{}),onClick:et,size:"large",children:"Create Your First Campaign"})]})]}),(0,a.jsxs)(D.Z,{open:M,onClose:()=>V(!1),maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(F.Z,{children:"Delete Campaign"}),(0,a.jsxs)(A.Z,{children:[(0,a.jsxs)(Z.Z,{children:['Are you sure you want to delete the campaign "',null==H?void 0:H.name,'"? This action cannot be undone.']}),(0,a.jsxs)(E.Z,{severity:"warning",sx:{mt:2},children:[(0,a.jsx)(G.Z,{children:"Warning"}),"Deleting this campaign will remove all associated data and historical records."]})]}),(0,a.jsxs)(N.Z,{children:[(0,a.jsx)(u.Z,{onClick:()=>V(!1),children:"Cancel"}),(0,a.jsx)(u.Z,{onClick:eo,color:"error",variant:"contained",children:"Delete Campaign"})]})]})]})]})}},6159:function(e,n,t){"use strict";t.d(n,{E6:function(){return r},QF:function(){return s},bO:function(){return i},hm:function(){return c},mK:function(){return o}});var a=t(4633);let r=async function(){let{skip:e=0,limit:n=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await a.Z.get("/api/v1/campaigns/",{params:{skip:e,limit:n}})).data}catch(e){throw console.error("Failed to fetch campaigns:",e),Error("Could not fetch campaigns.")}},i=async e=>{try{await a.Z.delete("/api/v1/campaigns/".concat(e))}catch(n){throw console.error("Failed to delete campaign ".concat(e,":"),n),Error("Could not delete the campaign.")}},s=async e=>{try{return(await a.Z.get("/api/v1/campaigns/".concat(e))).data}catch(n){throw console.error("Failed to fetch campaign ".concat(e,":"),n),Error("Could not fetch campaign details.")}},o=async e=>{try{return(await a.Z.post("/api/v1/campaigns/",e)).data}catch(e){throw console.error("Failed to create campaign:",e),Error("Could not create campaign.")}},c=async(e,n)=>{try{return(await a.Z.put("/api/v1/campaigns/".concat(e),n)).data}catch(n){throw console.error("Failed to update campaign ".concat(e,":"),n),Error("Could not update campaign.")}}}},function(e){e.O(0,[334,103,118,182,515,135,635,21,971,117,744],function(){return e(e.s=3563)}),_N_E=e.O()}]);